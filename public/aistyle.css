
        /* =========================================
           LEAF INTELLIGENCE DESIGN SYSTEM - REFINED
           ========================================= */
        :root {
            /* Forest Palette - Muted & Premium */
            --forest-900: #0a1f1a;
            --forest-800: #0f2f28;
            --forest-700: #1a4a3f;
            --forest-600: #1e5c4d;
            --forest-500: #247a64;
            --forest-400: #2d9a7e;
            --forest-300: #4db897;
            --forest-200: #7dcdb3;
            --forest-100: #b8e4d4;
            --forest-50: #e6f5f0;

            /* Teal Accents */
            --teal-900: #0d2d2d;
            --teal-700: #115e5e;
            --teal-500: #14807a;
            --teal-400: #1a9d96;
            --teal-300: #2ec4b6;
            --teal-200: #6edcd3;
            --teal-100: #b3ece8;

            /* Neutral - Softer Grays (Updated) */
            --gray-900: #1a1d1c;
            --gray-800: #2d302f;
            --gray-700: #404544;
            --gray-600: #5a5f5e;
            --gray-500: #757a79;
            --gray-400: #9a9f9e;
            --gray-300: #c4c8c7;
            --gray-200: #e2e5e4;
            --gray-100: #f0f2f1;
            --gray-50: #f8f9f9;

            /* Legacy Charcoal (mapped to gray for compatibility) */
            --charcoal-900: var(--gray-900);
            --charcoal-800: var(--gray-800);
            --charcoal-700: var(--gray-700);
            --charcoal-600: var(--gray-600);
            --charcoal-500: var(--gray-500);
            --charcoal-400: var(--gray-400);
            --charcoal-300: var(--gray-300);
            --charcoal-200: var(--gray-200);
            --charcoal-100: var(--gray-100);
            --charcoal-50: var(--gray-50);

            /* Surface Colors */
            --surface-primary: #ffffff;
            --surface-secondary: #f8fafa;
            --surface-tertiary: #f0f4f3;
            --surface-elevated: #ffffff;

            /* Borders - Softer */
            --border-subtle: rgba(10, 31, 26, 0.06);
            --border-default: rgba(10, 31, 26, 0.10);
            --border-strong: rgba(10, 31, 26, 0.16);

            /* Amber for regulatory */
            --amber-700: #b45309;
            --amber-600: #d97706;
            --amber-500: #f59e0b;
            --amber-100: #fef3c7;
            --amber-50: #fffbeb;

            /* Red for errors */
            --red-500: #ef4444;
            --red-100: #fee2e2;

            /* Shadows - Subtle */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.03);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.08), 0 4px 8px rgba(0, 0, 0, 0.04);

            /* Transitions */
            --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
            --duration-fast: 150ms;
            --duration-normal: 250ms;
        }
/* =========================================
   SKELETON LOADER - EXACT UI MIRROR
   Add this inside your <style> tag
   ========================================= */

/* Overlay container - matches app-container */
.app-skeleton-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 99999;
    display: flex;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    background: var(--surface-secondary);
    pointer-events: all;
    transition: opacity 0.4s ease, visibility 0.4s ease;
}

.app-skeleton-overlay.loaded {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

/* Shimmer animation */
@keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.skeleton-shimmer {
    background: linear-gradient(90deg, 
        var(--gray-200) 0%, 
        var(--gray-100) 40%,
        var(--gray-50) 50%, 
        var(--gray-100) 60%,
        var(--gray-200) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.8s ease-in-out infinite;
}

/* ================================
   SIDEBAR - Exact match (260px)
   ================================ */
.skel-sidebar {
    width: 260px;
    min-width: 260px;
    background: #ffffff;
    border-right: 1px solid #e5e7eb;
    display: flex;
    flex-direction: column;
}

.skel-sidebar-header {
    padding: 16px 16px 12px 16px;
    border-bottom: 1px solid #f3f4f6;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.skel-brand {
    display: flex;
    align-items: center;
    gap: 16px;
}

.skel-logo {
    width: 48px;
    height: 48px;
    border-radius: 50%;
}

.skel-brand-text {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.skel-sidebar-toggle {
    width: 36px;
    height: 36px;
    border-radius: 8px;
}

.skel-sidebar-content {
    flex: 1;
    overflow: hidden;
    padding: 8px 12px;
}

.skel-sidebar-section {
    margin-bottom: 8px;
}

.skel-nav-btn {
    height: 44px;
    border-radius: 10px;
    margin-bottom: 8px;
}

.skel-nav-btn.primary {
    background: linear-gradient(135deg, rgba(236, 253, 245, 0.8) 0%, rgba(239, 246, 255, 0.8) 100%) !important;
}

.skel-section-title {
    height: 12px;
    width: 80px;
    margin: 16px 12px 12px 12px;
    border-radius: 4px;
}

.skel-conversation {
    height: 40px;
    border-radius: 8px;
    margin-bottom: 4px;
}

.skel-sidebar-footer {
    padding: 12px;
    border-top: 1px solid #f3f4f6;
}

.skel-user-profile {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 10px;
    background: #f9fafb;
}

.skel-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
}

.skel-user-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

/* ================================
   MAIN WRAPPER
   ================================ */
.skel-main-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--surface-secondary);
}

/* Navbar - exact match */
.skel-navbar {
    height: 56px;
    background: #ffffff;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
}

.skel-navbar-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.skel-navbar-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

.skel-navbar-btn {
    width: 36px;
    height: 36px;
    border-radius: 8px;
}

/* ================================
   CONTENT AREA - Welcome State
   ================================ */
.skel-content-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.skel-chat-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 24px;
}

/* Welcome state - centered */
.skel-welcome {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    max-width: 600px;
    width: 100%;
}

/* Logo orb */
.skel-logo-orb {
    width: 80px;
    height: 80px;
    margin-bottom: 24px;
    position: relative;
}

.skel-logo-orb img {
    width: 80px;
    height: 80px;
    opacity: 0.9;
}

.skel-logo-glow {
    position: absolute;
    inset: -8px;
    background: radial-gradient(circle, rgba(16, 185, 129, 0.15) 0%, transparent 70%);
    border-radius: 50%;
    animation: glow-pulse 2s ease-in-out infinite;
}

@keyframes glow-pulse {
    0%, 100% { opacity: 0.5; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.1); }
}

/* Greeting text */
.skel-greeting {
    height: 36px;
    width: 280px;
    border-radius: 8px;
    margin-bottom: 12px;
}

.skel-subtitle {
    height: 24px;
    width: 200px;
    border-radius: 6px;
    margin-bottom: 32px;
}

/* Input bar - exact match */
.skel-input-bar {
    width: 100%;
    max-width: 600px;
    background: #ffffff;
    border: 2px solid #e5e7eb;
    border-radius: 16px;
    padding: 8px;
    margin-bottom: 24px;
}

.skel-input-inner {
    display: flex;
    align-items: center;
    gap: 8px;
}

.skel-input-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    flex-shrink: 0;
}

.skel-input-field {
    flex: 1;
    height: 40px;
    border-radius: 8px;
}

.skel-input-selector {
    width: 120px;
    height: 40px;
    border-radius: 8px;
    flex-shrink: 0;
}

.skel-input-send {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    flex-shrink: 0;
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.3) 0%, rgba(5, 150, 105, 0.3) 100%) !important;
}

/* Example pills */
.skel-pills {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
}

.skel-pill {
    height: 36px;
    width: 110px;
    border-radius: 8px;
}

/* Loading indicator - subtle */
.skel-loader {
    position: absolute;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.skel-spinner {
    display: flex;
    gap: 4px;
}

.skel-spinner-dot {
    width: 8px;
    height: 8px;
    background: var(--forest-400);
    border-radius: 50%;
    animation: bounce 1.4s ease-in-out infinite;
}

.skel-spinner-dot:nth-child(1) { animation-delay: 0s; }
.skel-spinner-dot:nth-child(2) { animation-delay: 0.2s; }
.skel-spinner-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes bounce {
    0%, 80%, 100% { transform: translateY(0); opacity: 0.4; }
    40% { transform: translateY(-8px); opacity: 1; }
}

.skel-loader-text {
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--gray-500);
}

/* Footer */
.skel-footer {
    background: #ffffff;
    padding: 12px 24px;
    text-align: center;
}

.skel-footer-text {
    height: 14px;
    width: 300px;
    margin: 0 auto;
    border-radius: 4px;
}

/* ================================
   MOBILE RESPONSIVE
   ================================ */
@media (max-width: 768px) {
    .skel-sidebar {
        display: none;
    }
    
    .skel-chat-wrapper {
        padding: 24px 16px;
    }
    
    .skel-input-selector {
        width: 80px;
    }
    
    .skel-pills {
        display: none;
    }
}
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* =========================================
   TYPOGRAPHY FIX - IBM Plex Sans
   ========================================= */
* {
    font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

input, textarea, button, select {
    font-family: inherit;
}

/* Base text weights for IBM Plex Sans */
body {
    font-weight: 400; /* Body text baseline */
}

h1, h2, h3, h4, h5, h6 {
    font-weight: 600; /* Headings */
    letter-spacing: -0.01em;
}

strong, b {
    font-weight: 600; /* Bold text */
}

.text-xxs {
    font-size: xx-small;
}
.text-light {
    font-weight: 300; /* Only for specific light text */
}
body {
    font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 400; /* IBM Plex needs 400 for body, 300 is too light */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    background: var(--surface-secondary);
    min-height: 100vh;
    overflow: hidden;
    font-size: 15px; /* Changed from 0.6375rem - proper readable size */
    line-height: 1.5; /* Better readability */
    color: var(--gray-700);
}

.gradient-right {
      background: linear-gradient(
        180deg,
        rgba(167, 243, 208, 0.7) 0%,
        rgba(190, 242, 255, 0.6) 30%,
        rgba(221, 214, 254, 0.5) 60%,
        rgba(251, 207, 232, 0.4) 100%
      );
    }
        /* =========================================
           USER MESSAGE COMPONENT - REFINED
           ========================================= */
        .user-message-container {
            display: flex;
            justify-content: flex-end;
            padding: 8px 0;
            margin-bottom: 16px;
        }

        .user-message-wrapper {
            max-width: 72%;
        }

        .user-message-bubble {
            position: relative;
            background: linear-gradient(135deg, var(--forest-700) 0%, var(--forest-600) 100%);
            color: #fff;
            padding: 14px 18px;
            border-radius: 18px 18px 4px 18px;
            font-size: 0.9375rem;
            font-weight: 300;
            line-height: 1.6;
            box-shadow: var(--shadow-md);
        }

        /* Subtle accent line */
        .user-message-bubble::after {
            content: '';
            position: absolute;
            top: 10px;
            bottom: 10px;
            right: -2px;
            width: 2px;
            background: linear-gradient(180deg, var(--teal-300), var(--forest-400));
            border-radius: 1px;
            opacity: 0.7;
        }

        .user-message-meta {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 10px;
            margin-top: 6px;
            padding-right: 4px;
        }

        .user-message-depth {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.6875rem;
             font-weight: 300;
            letter-spacing: 0.01em;
        }

        .user-message-depth.quick {
            background: var(--forest-50);
            color: var(--forest-600);
        }

        .user-message-depth.deep {
            background: #f3e8ff;
            color: #7c3aed;
        }

        .user-message-time {
            font-size: 0.6875rem;
           font-weight: 300;
            color: var(--gray-400);
        }

        /* Attachment bar */
        .user-attachment-bar {
            display: flex;
            gap: 8px;
            padding: 10px 14px;
            background: rgba(0, 0, 0, 0.12);
            border-radius: 0 0 4px 18px;
            margin-top: -4px;
            flex-wrap: wrap;
        }

        .attachment-chip {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 5px 10px;
            background: rgba(255,255,255,0.15);
            border-radius: 6px;
            font-size: 0.75rem;
           font-weight: 300;
            color: var(--forest-100);
        }

        .attachment-chip svg {
            width: 14px;
            height: 14px;
        }

        /* =========================================
           AI RESPONSE COMPONENT - REFINED
           ========================================= */
        .ai-response {
            background: var(--surface-primary);
            border-radius: 20px;
            border: 1px solid var(--border-subtle);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            margin: 16px 0;
        }

        .response-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-subtle);
            background: linear-gradient(180deg, var(--surface-primary) 0%, var(--surface-tertiary) 100%);
        }

        .ai-avatar {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-avatar svg {
            width: 32px;
            height: 32px;
        }

        .ai-info {
            flex: 1;
        }

        .ai-name {
            font-size: 0.875rem;
            font-weight: 300;
            color: var(--gray-900);
            letter-spacing: -0.01em;
        }

        .ai-subtitle {
            font-size: 0.75rem;
           font-weight: 300;
            color: var(--gray-500);
            margin-top: 1px;
        }

        .response-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: var(--forest-50);
            border-radius: 16px;
            font-size: 0.6875rem;
             font-weight: 300;
            color: var(--forest-600);
        }

        .response-status .status-dot {
            width: 5px;
            height: 5px;
            background: var(--forest-400);
            border-radius: 50%;
        }

        /* =========================================
           THINKING STATE COMPONENT - REFINED
           ========================================= */
        .thinking-container {
            border-bottom: 1px solid var(--border-subtle);
            overflow: hidden;
        }

        .thinking-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            cursor: pointer;
            transition: background var(--duration-fast) ease;
            user-select: none;
        }

        .thinking-header:hover {
            background: var(--surface-tertiary);
        }

        .thinking-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .thinking-icon::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            border: 2px solid var(--forest-300);
            opacity: 0;
            animation: pulse-ring 2s ease-out infinite;
        }

        .thinking-header.completed .thinking-icon::before {
            display: none;
        }

        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 0.8; }
            100% { transform: scale(1.4); opacity: 0; }
        }

        .thinking-icon svg {
            width: 24px;
            height: 24px;
        }

        .thinking-label {
            flex: 1;
            font-size: 0.8125rem;
             font-weight: 300;
            color: var(--gray-600);
        }

        .thinking-label span {
           font-weight: 300;
            color: var(--gray-400);
        }

        .thinking-chevron {
            width: 18px;
            height: 18px;
            color: var(--gray-400);
            transition: transform var(--duration-normal) var(--ease-out);
        }

        .thinking-header.expanded .thinking-chevron {
            transform: rotate(180deg);
        }

        .thinking-header.completed .thinking-label {
            color: var(--forest-600);
        }

        .thinking-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s var(--ease-out);
        }

        .thinking-body.expanded {
            max-height: 500px;
        }

        .thinking-steps {
            padding: 0 20px 16px 20px;
        }

        /* Timeline - Refined */
        .steps-timeline {
            position: relative;
            padding-left: 32px;
        }

        .steps-timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 16px;
            width: 2px;
            background: linear-gradient(180deg, var(--forest-300), var(--forest-100));
            border-radius: 1px;
        }

        .step-item {
            position: relative;
            padding: 10px 0;
        }

        .step-item:first-child { padding-top: 0; }
        .step-item:last-child { padding-bottom: 0; }

        .step-node {
            position: absolute;
            left: -32px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background: var(--surface-primary);
            border: 2px solid var(--forest-400);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .step-item:first-child .step-node {
            top: 10px;
            transform: none;
        }

        .step-node-inner {
            width: 6px;
            height: 6px;
            background: var(--forest-400);
            border-radius: 50%;
        }

        .step-item.completed .step-node {
            background: var(--forest-400);
            border-color: var(--forest-400);
        }

        .step-item.completed .step-node-inner {
            background: #fff;
        }

        .step-item.active .step-node {
            border-color: var(--teal-400);
            box-shadow: 0 0 0 3px rgba(26, 157, 150, 0.12);
        }

        .step-item.active .step-node-inner {
            background: var(--teal-400);
            animation: node-pulse 1.5s ease-in-out infinite;
        }

        @keyframes node-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        .step-content {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            background: var(--surface-tertiary);
            border-radius: 10px;
            transition: all 0.2s ease;
        }

        .step-item.active .step-content {
            background: linear-gradient(135deg, var(--teal-100) 0%, rgba(179, 236, 232, 0.3) 100%);
            border: 1px solid rgba(26, 157, 150, 0.15);
        }

        .step-icon {
            width: 16px;
            height: 16px;
            color: var(--gray-500);
            flex-shrink: 0;
        }

        .step-item.active .step-icon { color: var(--teal-500); }
        .step-item.completed .step-icon { color: var(--forest-500); }

        .step-text {
            font-size: 0.8125rem;
           font-weight: 300;
            color: var(--gray-600);
            line-height: 1.45;
        }

        .step-item.active .step-text {
            color: var(--gray-800);
        }

        /* =========================================
           SUMMARY SECTION - REFINED
           ========================================= */
        .summary-section {
            padding: 20px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .summary-box {
            padding: 16px 20px;
            background: linear-gradient(135deg, var(--forest-50) 0%, rgba(230, 245, 240, 0.4) 100%);
            border-radius: 14px;
            border-left: 3px solid var(--forest-400);
        }

        .summary-text {
            font-size: 0.9375rem;
            font-weight: 350;
            line-height: 1.7;
            color: var(--gray-800);
        }

     /* =========================================
           RESPONSE CONTENT - PROFESSIONAL REPORT STYLING
           ========================================= */
        .response-content {
            padding: 24px;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: #1e293b;
            line-height: 1.75;
            font-size: 0.9375rem;
            font-weight: 400;
        }

        .response-content p {
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--charcoal-700);
            margin-bottom: 16px;
            font-weight: 400;
        }

        .response-content p:last-child {
            margin-bottom: 0;
        }

        .response-content strong,
        .response-content b {
            font-weight: 600;
            color: var(--charcoal-900);
        }

        .response-content em,
        .response-content i {
            font-style: italic;
            color: #475569;
        }

        /* Headings */
        .response-content h1 {
            font-size: 2rem;
            font-weight: 600;
            color: #0f172a;
            margin-top: 2.5rem;
            margin-bottom: 1.25rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--forest-400);
            line-height: 1.3;
        }

        .response-content h1:first-child {
            margin-top: 0;
        }

        .response-content h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #0f172a;
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-left: 0.75rem;
            border-left: 3px solid var(--forest-400);
            line-height: 1.4;
        }

        .response-content h3 {
            font-size: 1.25rem;
            font-weight: 500;
            color: #334155;
            margin-top: 1.75rem;
            margin-bottom: 0.875rem;
            line-height: 1.4;
        }

        .response-content h4 {
            font-size: 1.125rem;
            font-weight: 500;
            color: #475569;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }

        .response-content h5 {
            font-size: 1rem;
            font-weight: 500;
            color: #475569;
            margin-top: 1.25rem;
            margin-bottom: 0.625rem;
            line-height: 1.4;
        }

        /* Lists */
        .response-content ul,
        .response-content ol {
            margin-left: 1.75rem;
            margin-bottom: 1.25rem;
            padding-left: 0.5rem;
        }

        .response-content ul {
            list-style-type: disc;
        }

        .response-content ol {
            list-style-type: decimal;
        }

        .response-content li {
            color: #334155;
            line-height: 1.8;
            margin-bottom: 0.625rem;
            padding-left: 0.5rem;
        }

        .response-content ul li::marker {
            color: var(--forest-400);
            font-size: 1.2em;
        }

        .response-content ol li::marker {
            color: var(--forest-400);
            font-weight: 600;
        }

        /* Blockquotes */
        .response-content blockquote {
            border-left: 4px solid var(--forest-400);
            padding-left: 1.5rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            margin: 1.5rem 0;
            background: #f8fafc;
            border-radius: 0 8px 8px 0;
            color: #475569;
            font-style: italic;
        }

        /* Code */
        .response-content code {
            background: #f1f5f9;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875em;
            color: #be185d;
            border: 1px solid #e2e8f0;
        }

        .response-content pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid #334155;
        }

        .response-content pre code {
            background: transparent;
            color: inherit;
            padding: 0;
            border: none;
            font-size: 0.875rem;
        }

        /* Links */
        .response-content a:not(.citation) {
            color: #0891b2;
            text-decoration: underline;
            text-decoration-color: rgba(8, 145, 178, 0.3);
            text-underline-offset: 2px;
            transition: all 0.2s ease;
        }

        .response-content a:not(.citation):hover {
            color: #0e7490;
            text-decoration-color: rgba(14, 116, 144, 0.6);
        }

        /* Horizontal Rule */
        .response-content hr {
            border: none;
            border-top: 2px solid #e2e8f0;
            margin: 2rem 0;
        }

        /* Tables */
        .response-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            font-size: 0.8125rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .response-content thead {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }

        .response-content th {
            color: #0f172a;
            font-weight: 500;
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 2px solid var(--forest-400);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            line-height: 1.5;
        }

        .response-content td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e2e8f0;
            color: #334155;
            font-weight: 400;
            line-height: 1.6;
            vertical-align: top;
        }

        .response-content tbody tr:last-child td {
            border-bottom: none;
        }

        .response-content tbody tr {
            transition: background-color 0.15s ease;
        }

        .response-content tbody tr:hover {
            background: #f8fafc;
        }

        .response-content tbody tr:nth-child(even) {
            background: #fafbfc;
        }

        .response-content tbody tr:nth-child(even):hover {
            background: #f3f4f6;
        }

        /* Table links */
        .response-content table a {
            color: #0891b2;
            text-decoration: none;
            font-size: 0.8125rem;
            font-weight: 400;
        }

        .response-content table a:hover {
            text-decoration: underline;
        }

        /* Citations styling */
        .response-content sup {
            color: #0891b2;
            font-weight: 600;
            font-size: 0.75em;
        }

     /* =========================================
           INLINE CITATIONS - BADGE STYLE
           ========================================= */
        .citation {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            margin: 0 3px;
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 1px solid #6ee7b7;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            color: #065f46;
            text-decoration: none;
            transition: all 0.2s ease;
            vertical-align: middle;
            white-space: nowrap;
        }

        .citation:hover {
            background: linear-gradient(135deg, #a7f3d0 0%, #6ee7b7 100%);
            border-color: #34d399;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.25);
        }

        /* Regulatory/FDA citations - amber/orange */
        .citation.regulatory {
            background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
            border-color: #fb923c;
            color: #9a3412;
        }

        .citation.regulatory:hover {
            background: linear-gradient(135deg, #fdba74 0%, #fb923c 100%);
            border-color: #f97316;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.25);
        }

        /* Remove dot styling - not needed for badge format */
        .citation-dot {
            display: none;
        }

        /* =========================================
           REFERENCES SECTION - REFINED
           ========================================= */
        .references-container {
            border-top: 1px solid var(--border-subtle);
            overflow: hidden;
        }

        .references-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            cursor: pointer;
            transition: background var(--duration-fast) ease;
            user-select: none;
            background: var(--surface-tertiary);
        }

        .references-header:hover {
            background: var(--forest-50);
        }

        .references-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--forest-500), var(--forest-600));
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-xs);
        }

        .references-icon svg {
            width: 18px;
            height: 18px;
            color: #fff;
        }

        .references-info {
            flex: 1;
        }

        .references-title {
            font-size: 0.875rem;
            font-weight: 350;
            color: var(--gray-900);
        }

        .references-count {
            font-size: 0.75rem;
           font-weight: 300;
            color: var(--gray-500);
            margin-top: 1px;
        }

        .references-chevron {
            width: 18px;
            height: 18px;
            color: var(--gray-400);
            transition: transform var(--duration-normal) var(--ease-out);
        }

        .references-header.expanded .references-chevron {
            transform: rotate(180deg);
        }

        .references-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s var(--ease-out);
        }

        .references-body.expanded {
            max-height: 1500px;
        }

        .references-list {
            padding: 14px;
        }

        /* Reference Card - Refined */
        .reference-card {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 14px;
            background: var(--surface-secondary);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all var(--duration-fast) ease;
            border: 1px solid transparent;
        }

        .reference-card:last-child {
            margin-bottom: 0;
        }

        .reference-card:hover {
            background: var(--surface-tertiary);
            border-color: var(--border-default);
            transform: translateX(3px);
        }

        .reference-badge {
            width: 28px;
            height: 28px;
            flex-shrink: 0;
            background: linear-gradient(135deg, var(--forest-400), var(--forest-500));
            border-radius: 7px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6875rem;
            font-weight: 300;
            color: #fff;
        }

        .reference-content {
            flex: 1;
            min-width: 0;
        }

        .reference-title {
            font-size: 0.875rem;
            font-weight: 350;
            color: var(--forest-600);
            text-decoration: none;
            line-height: 1.45;
            display: block;
            transition: color var(--duration-fast) ease;
        }

        .reference-title:hover {
            color: var(--forest-500);
            text-decoration: underline;
        }

        .reference-meta {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 6px;
            flex-wrap: wrap;
        }

        .reference-source {
            display: inline-flex;
            padding: 2px 6px;
            background: var(--amber-100);
            border-radius: 4px;
            font-size: 0.625rem;
            font-weight: 300;
            color: var(--amber-700);
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }

        .reference-year {
            font-size: 0.75rem;
            font-weight: 350;
            color: var(--gray-700);
        }

        .reference-authors {
            font-size: 0.6875rem;
           font-weight: 300;
            color: var(--gray-500);
            margin-top: 4px;
            line-height: 1.4;
        }

        .reference-actions {
            display: flex;
            gap: 3px;
            flex-shrink: 0;
        }

        .ref-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            border: 1px solid var(--border-default);
            background: var(--surface-primary);
            color: var(--gray-400);
            cursor: pointer;
            transition: all var(--duration-fast) ease;
        }

        .ref-btn:hover {
            border-color: var(--forest-300);
            color: var(--forest-500);
            background: var(--forest-50);
        }

        .ref-btn svg {
            width: 12px;
            height: 12px;
        }

        .ref-btn.voted-up {
            background: var(--forest-50);
            border-color: var(--forest-300);
            color: var(--forest-500);
        }

        .ref-btn.voted-down {
            background: var(--red-100);
            border-color: var(--red-500);
            color: var(--red-500);
        }

/* =========================================
   INLINE DATA VIEW CARDS (like download cards)
   ========================================= */

/* .data-cards-inline { */
    /* margin-block: 24px;
    padding-block: 24px;

    border-top: 1px solid #e5e7eb;
} */

.data-cards-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.data-view-card {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
}

.data-view-card:hover {
    border-color: #10b981;
    background: #f9fafb;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.data-view-card-icon {
    width: 48px;
    height: 48px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.data-view-card-icon svg {
    width: 24px;
    height: 24px;
    stroke: white;
    stroke-width: 2;
}

.data-view-card-content {
    flex: 1;
    min-width: 0;
}

.data-view-card-title {
    font-size: 0.9375rem;
    font-weight: 400;
    color: #111827;
    margin-bottom: 2px;
}

.data-view-card-subtitle {
    font-size: 0.8125rem;
    font-weight: 300;
    color: #6b7280;
}

.data-view-card-action {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: white;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 400;
    color: #374151;
    transition: all 0.15s ease;
    flex-shrink: 0;
}

.data-view-card:hover .data-view-card-action {
    background: #f9fafb;
    border-color: #10b981;
    color: #059669;
}

.data-view-card-arrow {
    width: 16px;
    height: 16px;
    color: #9ca3af;
    transition: transform 0.2s ease;
}

.data-view-card:hover .data-view-card-arrow {
    transform: translateX(2px);
    color: #10b981;
}



        /* =========================================
           ACTION BAR - REFINED
           ========================================= */
        .action-bar {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 12px 20px;
            background: var(--surface-tertiary);
            border-top: 1px solid var(--border-subtle);
        }

        .action-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            padding: 7px 12px;
            background: var(--surface-primary);
            border: 1px solid var(--border-default);
            border-radius: 8px;
            font-size: 0.75rem;
             font-weight: 300;
            color: var(--gray-600);
            cursor: pointer;
            transition: all var(--duration-fast) ease;
        }

        .action-btn:hover {
            border-color: var(--forest-300);
            color: var(--forest-600);
            background: var(--forest-50);
        }

        .action-btn svg {
            width: 14px;
            height: 14px;
        }

        .action-btn.icon-only {
            padding: 7px;
        }

        .action-spacer {
            flex: 1;
        }

        .source-count {
            font-size: 0.75rem;
           font-weight: 300;
            color: var(--gray-500);
        }

        .source-count strong {
            font-weight: 350;
            color: var(--forest-600);
        }

        /* =========================================
           LOADING ANIMATIONS - REFINED
           ========================================= */
        .leaf-loader {
            display: flex;
            gap: 4px;
            align-items: flex-end;
            height: 24px;
            justify-content: center;
        }

        .leaf-bar {
            width: 4px;
            background: linear-gradient(180deg, var(--forest-300), var(--forest-500));
            border-radius: 2px;
            animation: leaf-grow 1.2s ease-in-out infinite;
        }

        .leaf-bar:nth-child(1) { animation-delay: 0s; height: 12px; }
        .leaf-bar:nth-child(2) { animation-delay: 0.1s; height: 18px; }
        .leaf-bar:nth-child(3) { animation-delay: 0.2s; height: 24px; }
        .leaf-bar:nth-child(4) { animation-delay: 0.3s; height: 18px; }
        .leaf-bar:nth-child(5) { animation-delay: 0.4s; height: 12px; }

        @keyframes leaf-grow {
            0%, 100% { transform: scaleY(0.5); opacity: 0.5; }
            50% { transform: scaleY(1); opacity: 1; }
        }

        /* Orbit loader */
        .orbit-loader {
            width: 60px;
            height: 60px;
            position: relative;
            margin: 0 auto;
        }

        .orbit-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            background: var(--forest-600);
            border-radius: 50%;
        }

        .orbit-ring {
            position: absolute;
            inset: 0;
            border: 2px solid var(--forest-200);
            border-radius: 50%;
            animation: orbit-spin 3s linear infinite;
        }

        .orbit-ring::before {
            content: '';
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background: var(--teal-400);
            border-radius: 50%;
            box-shadow: 0 0 12px var(--teal-400);
        }

        @keyframes orbit-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Initial Loader Container */
        .initial-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 32px 20px;
        }

        .loader-text {
            font-size: 0.8125rem;
           font-weight: 300;
            color: var(--gray-500);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Small leaf loader variant */
        .leaf-loader.small {
            height: 20px;
            gap: 3px;
        }

        .leaf-loader.small .leaf-bar {
            width: 3px;
        }

        .leaf-loader.small .leaf-bar:nth-child(1) { height: 10px; }
        .leaf-loader.small .leaf-bar:nth-child(2) { height: 14px; }
        .leaf-loader.small .leaf-bar:nth-child(3) { height: 20px; }

        /* Content loader */
        .content-loader {
            display: flex;
            justify-content: center;
            padding: 24px 0;
        }

        /* Status dot pulsing */
        .status-dot.pulsing {
            animation: status-pulse 1.5s ease-in-out infinite;
        }

        @keyframes status-pulse {
            0%, 100% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.5;
                transform: scale(1.2);
            }
        }

        .response-status.processing {
            background: var(--amber-50);
            color: var(--amber-700);
        }

        .response-status.processing .status-dot {
            background: var(--amber-500);
        }

        /* =========================================
           INPUT BAR - BOTTOM - REFINED
           ========================================= */
   .input-bar-container {
    border-top: 1px solid var(--border-subtle);
    background: var(--surface-primary);
    padding: 16px 24px;
}

.input-bar-wrapper {
    width: 100%;
    max-width: none;
    margin: 0;
}

/* =========================================
   ENHANCED INPUT BAR STYLING
   ========================================= */

/* Enhanced input-bar with better shadows */
.input-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    background: var(--surface-primary);
    border: 2px solid var(--border-default);
    border-radius: 16px;
    padding: 8px 8px 8px 20px;
    transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02);
}

.input-bar:focus-within {
    border-color: var(--forest-400);
    box-shadow: 0 0 0 4px rgba(45, 154, 126, 0.1),
                0 2px 8px rgba(0, 0, 0, 0.04);
}

/* Enhanced textarea */
.input-bar textarea {
    flex: 1;
    border: none;
    outline: none;
    font-family: inherit;
    font-size: 0.95rem;
   font-weight: 300;
    color: var(--gray-900);
    background: transparent;
    padding: 8px 0;
    resize: none;
    min-height: 24px;
    max-height: 120px;
    line-height: 1.5;
}

.input-bar textarea::placeholder {
    color: var(--gray-400);
}

/* Enhanced action buttons */
.input-action-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    border-radius: 10px;
    color: var(--gray-400);
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.input-action-btn:hover {
    background: var(--surface-tertiary);
    color: var(--gray-600);
    transform: scale(1.05);
}

.input-action-btn svg {
    width: 20px;
    height: 20px;
}

/* Enhanced send button with shimmer effect */
.send-btn {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: linear-gradient(135deg, var(--forest-500), var(--forest-600));
    border-radius: 12px;
    color: white;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(36, 122, 100, 0.2);
}

.send-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, 
        transparent 40%, 
        rgba(255,255,255,0.15) 50%, 
        transparent 60%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.send-btn:hover {
    transform: scale(1.05) translateY(-1px);
    box-shadow: 0 4px 16px rgba(36, 122, 100, 0.35);
}

.send-btn:hover::before {
    opacity: 1;
}

.send-btn:active {
    transform: scale(0.98);
}

.send-btn svg {
    width: 20px;
    height: 20px;
    position: relative;
    z-index: 1;
}

.send-btn.disabled,
.send-btn:disabled {
    background: var(--gray-200);
    cursor: not-allowed;
    opacity: 0.6;
    transform: none;
    box-shadow: none;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .input-bar-container {
        padding: 12px 16px;
    }
    
    .input-bar {
        padding: 6px 6px 6px 16px;
    }
    
    .send-btn {
        width: 40px;
        height: 40px;
    }
    
    .input-action-btn {
        width: 36px;
        height: 36px;
    }
}

        .input-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--surface-primary);
            border: 2px solid var(--border-default);
            border-radius: 14px;
            padding: 6px 6px 6px 16px;
            transition: all var(--duration-normal) ease;
        }

        .input-bar:focus-within {
            border-color: var(--forest-400);
            box-shadow: 0 0 0 3px rgba(45, 154, 126, 0.1);
        }

        .input-bar textarea {
            flex: 1;
            border: none;
            outline: none;
            font-family: inherit;
            font-size: 0.9375rem;
           font-weight: 300;
            color: var(--gray-900);
            background: transparent;
            padding: 8px 0;
            resize: none;
            min-height: 24px;
            max-height: 120px;
            line-height: 1.5;
        }

        .input-bar textarea::placeholder {
            color: var(--gray-400);
        }

        .input-action-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            background: transparent;
            border-radius: 8px;
            color: var(--gray-400);
            cursor: pointer;
            transition: all var(--duration-fast) ease;
            flex-shrink: 0;
        }

        .input-action-btn:hover {
            background: var(--surface-tertiary);
            color: var(--gray-600);
        }

        .input-action-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Reasoning Selector - Refined */
        .reasoning-selector {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 7px 12px;
            background: var(--forest-50);
            border: 1px solid var(--forest-200);
            border-radius: 8px;
            font-size: 0.75rem;
             font-weight: 300;
            color: var(--forest-700);
            cursor: pointer;
            transition: all var(--duration-fast) ease;
        }

        .reasoning-selector:hover {
            background: var(--forest-100);
            border-color: var(--forest-300);
        }

        .reasoning-selector svg {
            width: 14px;
            height: 14px;
        }

        .reasoning-selector .chevron-icon {
            width: 12px;
            height: 12px;
            color: var(--forest-400);
            transition: transform var(--duration-fast) ease;
        }

        /* Reasoning Dropdown - Refined */
        .reasoning-dropdown {
            position: absolute;
            right: 0;
            bottom: 100%;
            margin-bottom: 8px;
            width: 280px;
            background: var(--surface-primary);
            border: 1px solid var(--border-default);
            border-radius: 14px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
            z-index: 9999;
            overflow: hidden;
        }

        .reasoning-dropdown-header {
            padding: 12px 16px;
            background: var(--surface-tertiary);
            border-bottom: 1px solid var(--border-subtle);
        }

        .reasoning-dropdown-header p:first-child {
            font-weight: 350;
            color: var(--gray-900);
            font-size: 0.8125rem;
        }

        .reasoning-dropdown-header p:last-child {
           font-weight: 300;
            color: var(--gray-500);
            font-size: 0.75rem;
        }

        .reasoning-option {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 16px;
            width: 100%;
            text-align: left;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: all var(--duration-fast) ease;
        }

        .reasoning-option:hover {
            background: var(--surface-tertiary);
        }

        .reasoning-option:first-of-type {
            border-bottom: 1px solid var(--border-subtle);
        }

        .reasoning-option-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .reasoning-option-icon.quick {
            background: var(--forest-100);
            color: var(--forest-600);
        }

        .reasoning-option-icon.deep {
            background: #f3e8ff;
            color: #7c3aed;
        }

        .reasoning-option-icon svg {
            width: 16px;
            height: 16px;
        }

        .reasoning-option-content {
            flex: 1;
        }

        .reasoning-option-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 350;
            color: var(--gray-900);
            font-size: 0.8125rem;
            margin-bottom: 3px;
        }

        .reasoning-time {
            font-size: 0.625rem;
            font-weight: 300;
            padding: 2px 6px;
            border-radius: 8px;
        }

        .reasoning-time.quick {
            background: var(--forest-100);
            color: var(--forest-700);
        }

        .reasoning-time.deep {
            background: #f3e8ff;
            color: #7c3aed;
        }

        .reasoning-option-desc {
            font-size: 0.6875rem;
           font-weight: 300;
            color: var(--gray-500);
            line-height: 1.4;
        }

        .send-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            background: linear-gradient(135deg, var(--forest-500), var(--forest-600));
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            transition: all var(--duration-fast) ease;
            flex-shrink: 0;
        }

        .send-btn:hover {
            background: linear-gradient(135deg, var(--forest-400), var(--forest-500));
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .send-btn svg {
            width: 18px;
            height: 18px;
        }

        /* ================================
           LAYOUT STRUCTURE
           ================================ */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        /* ================================
           SIDEBAR STYLES - LIGHT THEME
           ================================ */
        .sidebar {
            width: 260px;
            min-width: 260px;
            background: #ffffff;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 40;
            overflow-x: hidden;
        }

        /* Minimized sidebar state - shows only icons */
        .sidebar.minimized {
            width: 60px;
            min-width: 60px;
            overflow-x: hidden;
        }

        .sidebar.minimized .sidebar-header {
            padding: 14px 10px;
            justify-content: center;
            border-bottom: 1px solid #f3f4f6;
        }

        .sidebar.minimized .brand-container,
        .sidebar.minimized .brand-text,
        .sidebar.minimized .sidebar-section-title,
        .sidebar.minimized .sidebar-section-action,
        .sidebar.minimized .sidebar-item span,
        .sidebar.minimized .user-info,
        .sidebar.minimized .user-profile-info,
        .sidebar.minimized .user-profile-chevron,
        .sidebar.minimized .section-chevron,
        .sidebar.minimized .sidebar-section-content,
        .sidebar.minimized .files-section .sidebar-section-content,
        .sidebar.minimized .conversation-list-container,
        .sidebar.minimized .sidebar-section.files-section .sidebar-section-content,
        .sidebar.minimized .sidebar-section .sidebar-section-content,
        .sidebar.minimized .nav-item span,
        .sidebar.minimized .starter-section {
            display: none !important;
        }
        
        /* Chat bubble icon for conversations - hidden by default */
        .conversations-minimized-icon {
            display: none !important;
        }
        
        /* Show chat bubble icon ONLY when sidebar is minimized */
        .sidebar.minimized .conversations-minimized-icon {
            display: flex !important;
            align-items: center;
            justify-content: center;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s ease;
            margin: 4px 8px;
        }
        
        .sidebar.minimized .conversations-minimized-icon:hover {
            background: #f3f4f6;
        }
        
        .sidebar.minimized .conversations-minimized-icon svg {
            width: 22px;
            height: 22px;
            color: #6b7280;
            transition: color 0.2s ease;
        }
        
        .sidebar.minimized .conversations-minimized-icon:hover svg {
            color: #10b981;
        }

        .sidebar.minimized .sidebar-toggle {
            margin: 0;
            width: 40px;
            height: 40px;
        }

        .sidebar.minimized .sidebar-content {
            padding: 8px;
        }

        .sidebar.minimized .sidebar-section {
            margin-bottom: 4px;
        }

        .sidebar.minimized .sidebar-section-header {
            padding: 12px;
            justify-content: center;
            border-radius: 10px;
        }

        .sidebar.minimized .sidebar-section-header:hover {
            background: #f3f4f6;
        }

        .sidebar.minimized .sidebar-item {
            padding: 12px;
            justify-content: center;
            border-radius: 10px;
        }

        .sidebar.minimized .sidebar-item-icon {
            width: 22px;
            height: 22px;
            margin: 0;
            color: #6b7280;
        }

        .sidebar.minimized .sidebar-item:hover .sidebar-item-icon,
        .sidebar.minimized .sidebar-section-header:hover .sidebar-item-icon {
            color: #10b981;
        }

        .sidebar.minimized .sidebar-footer {
            padding: 8px;
        }

        .sidebar.minimized .user-profile-enhanced {
            padding: 10px;
            justify-content: center;
            margin: 4px;
            border-radius: 10px;
        }

        .sidebar.minimized .user-profile-avatar {
            width: 36px;
            height: 36px;
            font-size: 14px;
        }

        .sidebar-header {
            padding: 16px 16px 12px 16px;
            border-bottom: 1px solid #f3f4f6;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-toggle {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: transparent;
            border: none;
            cursor: pointer;
            color: #6b7280;
            transition: all 0.2s ease;
        }

        .sidebar-toggle:hover {
            background: #f3f4f6;
            color: #374151;
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 8px 12px;
        }

        .sidebar-section {
            margin-bottom: 8px;
        }

        .sidebar-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.15s ease;
        }

        .sidebar-section-header:hover {
            background: #f9fafb;
        }

        .sidebar-section-title {
            font-size: 12px;
            font-weight: 500;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .sidebar-section-action {
            font-size: 12px;
            font-weight: 500;
            color: #10b981;
            cursor: pointer;
            transition: color 0.15s ease;
        }

        .sidebar-section-action:hover {
            color: #059669;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
            color: #4b5563;
            font-size: 14px;
            font-weight: 400;
        }

        .sidebar-item:hover {
            background: #f3f4f6;
            color: #111827;
        }

        .sidebar-item.active {
            background: linear-gradient(135deg, #ecfdf5 0%, #eff6ff 100%);
            color: #059669;
        }

        .sidebar-item-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            color: #9ca3af;
        }

        .sidebar-item:hover .sidebar-item-icon,
        .sidebar-item.active .sidebar-item-icon {
            color: #10b981;
        }

        .sidebar-empty {
            padding: 8px 12px;
            font-size: 13px;
            color: #9ca3af;
            font-style: italic;
        }

        .conversation-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-size: 13px;
            color: #4b5563;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .conversation-item:hover {
            background: #f3f4f6;
            color: #111827;
        }

        .sidebar-footer {
            padding: 12px;
            border-top: 1px solid #f3f4f6;
            background: #fafafa;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .user-profile:hover {
            background: #f3f4f6;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 500;
        }

        .user-info {
            flex: 1;
            min-width: 0;
        }

        .user-name {
            font-size: 14px;
            font-weight: 500;
            color: #111827;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-email {
            font-size: 12px;
            color: #6b7280;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Breadcrumb trail styles */
        .breadcrumb-trail {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #6b7280;
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #374151;
            font-weight: 400;
        }

        .breadcrumb-item.brand {
            font-weight: 600;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .breadcrumb-separator {
            color: #d1d5db;
            font-size: 14px;
        }

        .breadcrumb-current {
            color: #6b7280;
            font-weight: 400;
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .breadcrumb-dropdown {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .breadcrumb-dropdown:hover {
            background: #f3f4f6;
        }

        .breadcrumb-dropdown svg {
            width: 14px;
            height: 14px;
            color: #9ca3af;
        }

        /* ================================
           MAIN CONTENT AREA
           ================================ */
        .main-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            background: #fafafa;
        }

        /* ================================
           TOP NAVBAR
           ================================ */
        .navbar {
            height: 60px;
            min-height: 60px;
            background: #ffffff;
            /* border-bottom: 1px solid #e5e7eb; */
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 30;
        }

        .navbar-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

       .navbar-toggle {
            width: auto;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 0 8px;
            border-radius: 8px;
            background: transparent;
            border: none;
            cursor: pointer;
            color: #6b7280;
            transition: all 0.2s ease;
        }

        .navbar-toggle:hover {
            background: #f3f4f6;
            color: #374151;
        }

        .navbar-toggle.hidden-toggle {
            display: none;
        }

        /* Show breadcrumb when sidebar is minimized */
        .sidebar.minimized ~ .main-wrapper .breadcrumb-trail {
            display: flex;
        }


    .navbar-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .navbar-logo {
            height: 32px;
            width: auto;
        }

        .navbar-brand {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .navbar-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
             font-weight: 300;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #e5e7eb;
            background: #ffffff;
            color: #374151;
        }

        .navbar-btn:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        .navbar-btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .navbar-btn-primary:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            transform: translateY(-1px);
        }

        .navbar-icon-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: transparent;
            border: none;
            cursor: pointer;
            color: #6b7280;
            transition: all 0.2s ease;
        }

        .navbar-icon-btn:hover {
            background: #f3f4f6;
            color: #374151;
        }

        /* ================================
           CHAT CONTAINER (Preserved)
           ================================ */
        .chat-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: #ffffff;
            margin: 0;
            max-width: 1000px;
        }

        /* Chat Container Styles */
        #chatdiv {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
            overflow: hidden;
        }

        /* Scrollbar Styles */
        #chatContent::-webkit-scrollbar {
            width: 6px;
        }

        #chatContent::-webkit-scrollbar-track {
            background: transparent;
        }

        #chatContent::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }

        #chatContent::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* Custom scrollbar styles for textareas */
        #aiInputInitial::-webkit-scrollbar,
        #aiInputContinuous::-webkit-scrollbar {
            width: 6px;
        }

        #aiInputInitial::-webkit-scrollbar-track,
        #aiInputContinuous::-webkit-scrollbar-track {
            background: transparent;
        }

        #aiInputInitial::-webkit-scrollbar-thumb,
        #aiInputContinuous::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 3px;
        }

        #aiInputInitial::-webkit-scrollbar-thumb:hover,
        #aiInputContinuous::-webkit-scrollbar-thumb:hover {
            background-color: #9ca3af;
        }

        /* Firefox scrollbar */
        #aiInputInitial,
        #aiInputContinuous {
            scrollbar-width: thin;
            scrollbar-color: #d1d5db transparent;
        }

        /* Sidebar scrollbar */
        .sidebar-content::-webkit-scrollbar {
            width: 4px;
        }

        .sidebar-content::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar-content::-webkit-scrollbar-thumb {
            background-color: #e5e7eb;
            border-radius: 2px;
        }

        .sidebar-content::-webkit-scrollbar-thumb:hover {
            background-color: #d1d5db;
        }

        /* Chat Welcome Styles */
        .chat-welcome {
            text-align: center;
            padding: 3rem 1rem;
        }

        .chat-logo-container {
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
        }

        .chat-logo-orb {
            position: relative;
            width: 112px;
            height: 112px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
.chat-welcome-greeting {
    font-size: 2rem;
    font-weight: 500; /* Increased from 300 - IBM Plex needs more weight for large text */
    color: #1f2937;
    margin-bottom: 0.5rem;
    letter-spacing: -0.02em;
}

.chat-welcome-subtitle {
    font-size: 1.125rem;
    font-weight: 400; /* Increased from 300 */
    color: #6b7280;
}

        .chat-welcome-subtitle .highlight {
            background: linear-gradient(135deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 300;
        }

        /* Message Bubble Styles */
        .gradient-chat-bubble {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }

        .fade-in-up {
            animation: fadeInUp 0.4s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Artifact Container */
        .artifact-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Report Content Styling */
        .report-content {
            font-size: 15px;
           font-weight: 300;
            line-height: 1.7;
            color: #374151;
        }

        .report-content h1,
        .report-content h2,
        .report-content h3 {
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            color: #1f2937;
            font-weight: 300;
        }

        .report-content h1 {
            font-size: 1.875rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }

        .report-content h2 {
            font-size: 1.5rem;
        }

        .report-content h3 {
            font-size: 1.25rem;
        }

        .report-content p {
            margin-bottom: 1em;
           font-weight: 300;
        }

        .report-content ul,
        .report-content ol {
            margin: 1em 0;
            padding-left: 1.5em;
        }

        .report-content li {
            margin: 0.5em 0;
           font-weight: 300;
        }

        .report-content code {
            background: #f3f4f6;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.875em;
            font-family: 'Courier New', monospace;
        }

        .report-content pre {
            background: #1f2937;
            color: #f9fafb;
            padding: 1em;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1em 0;
        }

        .report-content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .report-content blockquote {
            border-left: 4px solid #10b981;
            padding-left: 1em;
            color: #6b7280;
            font-style: italic;
            margin: 1em 0;
        }

        .report-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1em 0;
        }

        .report-content table th,
        .report-content table td {
            border: 1px solid #e5e7eb;
            padding: 0.5em;
            text-align: left;
        }

        .report-content table th {
            background: #f3f4f6;
            font-weight: 300;
        }

        /* Template Box Styling */
        .template-box {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left: 4px solid #3b82f6;
            border-radius: 8px;
            padding: 16px 20px;
            margin: 16px 0;
        }

        /* Typing Loader */
        .stream-cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background: #10b981;
            margin-left: 2px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Hidden State */
        .hidden {
            display: none !important;
        }

        /* Progress Timeline */
        .progress-timeline {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem;
            border-radius: 0.5rem;
            background: rgba(16, 185, 129, 0.05);
        }

        .progress-step.active {
            background: rgba(16, 185, 129, 0.1);
        }

        .progress-step.complete {
            background: rgba(16, 185, 129, 0.15);
        }

        /* Seamless Card */
        .seamless-card {
            background: transparent;
        }

        /* Citation Badge */
        .citation-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            color: #1e40af;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 300;
            text-decoration: none;
            transition: all 0.2s ease;
            border: 1px solid #bfdbfe;
        }

        .citation-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.2);
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
        }

        /* Mobile Overlay */
        .sidebar-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 35;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
        }

        /* Dropdown Menu Styles */
        .dropdown-menu {
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 8px;
            width: 200px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            border: 1px solid #e5e7eb;
            padding: 8px;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 14px;
            color: #374151;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .dropdown-item:hover {
            background: #f3f4f6;
        }

        .dropdown-divider {
            height: 1px;
            background: #e5e7eb;
            margin: 8px 0;
        }

        /* Section Chevron */
        .section-chevron {
            width: 16px;
            height: 16px;
            color: #9ca3af;
            transition: transform 0.2s ease;
        }

        .section-chevron.expanded {
            transform: rotate(180deg);
        }

        /* Online Status Indicator */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: #f0fdf4;
            border-radius: 20px;
            font-size: 12px;
             font-weight: 300;
            color: #166534;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            position: relative;
        }

        .status-dot::after {
            content: '';
            position: absolute;
            inset: 0;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse-ring 1.5s ease-out infinite;
        }

        @keyframes pulse-ring {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                bottom: 0;
                transform: translateX(-100%);
            }

            .sidebar:not(.collapsed) {
                transform: translateX(0);
            }

            .sidebar-overlay {
                display: block;
            }


            .navbar-btn span {
                display: none;
            }

            .navbar-btn {
                padding: 8px;
            }
        }

        /* ================================
           VINTAGE HANDBOOK STYLES
           ================================ */
       .handbook-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: all 0.4s ease;
} 

      .handbook-overlay.active {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

        .handbook-container {
            position: relative;
            width: 90%;
            max-width: 800px;
            height: 85vh;
            max-height: 700px;
            perspective: 2000px;
            transform: scale(0.9);
            transition: transform 0.4s ease;
        }

        .handbook-overlay.active .handbook-container {
            transform: scale(1);
        }

        .handbook-book {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            background: linear-gradient(135deg, #8B4513 0%, #654321 50%, #4a3728 100%);
            border-radius: 4px 16px 16px 4px;
            box-shadow: 
                0 0 0 2px #5d3a1a,
                0 0 0 4px #8B4513,
                0 25px 60px rgba(0,0,0,0.5),
                inset 0 0 80px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .handbook-spine {
            width: 40px;
            min-width: 40px;
            background: linear-gradient(90deg, 
                #3d2817 0%, 
                #654321 20%, 
                #8B4513 50%, 
                #654321 80%, 
                #3d2817 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 2px solid #2d1f14;
            box-shadow: inset -5px 0 15px rgba(0,0,0,0.4);
        }

        .spine-text {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 14px;
            font-weight: 300;
            color: #d4a574;
            letter-spacing: 3px;
            text-transform: uppercase;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .spine-decoration {
            width: 20px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #d4a574, transparent);
            margin: 20px 0;
        }

        .handbook-pages {
            flex: 1;
            position: relative;
            background: #f4efe4;
            overflow: hidden;
        }

        .handbook-page {
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, 
                #e8e0d0 0%, 
                #f5f0e6 5%, 
                #faf7f0 50%, 
                #f5f0e6 95%, 
                #e8dfd0 100%);
            padding: 40px 50px 80px 50px;
            opacity: 0;
            visibility: hidden;
            transform: translateX(100%);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            box-shadow: inset 0 0 50px rgba(139, 90, 43, 0.1);
        }

        .handbook-page::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 30px;
            background: linear-gradient(to right, 
                rgba(0,0,0,0.08) 0%, 
                rgba(0,0,0,0.03) 50%, 
                transparent 100%);
            pointer-events: none;
        }

        .handbook-page.active {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
        }

        .handbook-page.prev {
            transform: translateX(-100%);
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #d4c4a8;
            position: relative;
        }

        .page-header::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: #f5f0e6;
            padding: 0 15px;
            color: #8B4513;
            font-size: 18px;
        }

        .page-chapter {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 4px;
            color: #8B4513;
            margin-bottom: 8px;
        }

        .page-title {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 28px;
            font-weight: 300;
            color: #2c1810;
            line-height: 1.3;
        }

        .page-subtitle {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 14px;
            font-style: italic;
            color: #6b5344;
            margin-top: 8px;
        }

        .page-content {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 15px;
            line-height: 1.8;
            color: #3d2e24;
        }

        .page-content h3 {
            font-size: 18px;
            font-weight: 300;
            color: #2c1810;
            margin: 25px 0 12px 0;
            padding-left: 15px;
            border-left: 3px solid #8B4513;
        }

        .page-content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .page-content ul {
            margin: 15px 0;
            padding-left: 30px;
        }

        .page-content li {
            margin-bottom: 10px;
            position: relative;
        }

        .page-content li::marker {
            color: #8B4513;
        }

        .handbook-example {
            background: linear-gradient(135deg, #f0ebe0 0%, #e8e2d6 100%);
            border: 1px solid #d4c4a8;
            border-left: 4px solid #8B4513;
            border-radius: 0 8px 8px 0;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .handbook-example::before {
            content: 'EXAMPLE';
            position: absolute;
            top: -10px;
            left: 15px;
            background: #8B4513;
            color: #f5f0e6;
            font-size: 10px;
            font-weight: 300;
            letter-spacing: 2px;
            padding: 3px 12px;
            border-radius: 3px;
        }

        .example-bad {
            background: #fef2f2;
            border-left: 3px solid #dc2626;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            padding: 12px 15px;
            border-radius: 4px;
            margin: 10px 0;
            color: #991b1b;
        }

        .example-good {
            background: #f0fdf4;
            border-left: 3px solid #16a34a;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            padding: 12px 15px;
            border-radius: 4px;
            margin: 10px 0;
            color: #166534;
        }

        .handbook-tip {
            background: linear-gradient(135deg, #fff9e6 0%, #fff4d6 100%);
            border: 1px dashed #d4a574;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 20px 0;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .handbook-tip-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .handbook-tip-content {
            font-size: 14px;
            font-style: italic;
        }

        .page-number {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 14px;
            color: #8B4513;
        }

        .page-number::before,
        .page-number::after {
            content: '';
            margin: 0 10px;
            color: #d4c4a8;
        }

        .handbook-nav {
            position: absolute;
            bottom: 20px;
            left: 50px;
            right: 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .handbook-nav-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
            color: #f5f0e6;
            border: none;
            border-radius: 6px;
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .handbook-nav-btn:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8B4513 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .handbook-nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .handbook-nav-btn svg {
            width: 16px;
            height: 16px;
        }

        .handbook-dots {
            display: flex;
            gap: 8px;
        }

        .handbook-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #d4c4a8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .handbook-dot.active {
            background: #8B4513;
            transform: scale(1.2);
        }

        .handbook-dot:hover {
            background: #a0522d;
        }

        .handbook-close {
            position: absolute;
            top: -15px;
            right: -15px;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
            border: 3px solid #f5f0e6;
            border-radius: 50%;
            color: #f5f0e6;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 10;
        }

        .handbook-close:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8B4513 100%);
            transform: rotate(90deg) scale(1.1);
        }

        .handbook-close svg {
            width: 20px;
            height: 20px;
        }

        .handbook-cover {
            background: linear-gradient(135deg, #8B4513 0%, #654321 50%, #4a3728 100%) !important;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #f5f0e6;
        }

        .handbook-cover::before {
            display: none;
        }

        .cover-ornament {
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #d4a574, transparent);
            margin: 20px 0;
        }

        .cover-icon {
            width: 80px;
            height: 80px;
            background: rgba(212, 165, 116, 0.2);
            border: 2px solid #d4a574;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
        }

        .cover-icon svg {
            width: 40px;
            height: 40px;
            color: #d4a574;
        }

        .cover-title {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 36px;
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .cover-subtitle {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            font-size: 16px;
            font-style: italic;
            color: #d4a574;
            max-width: 400px;
        }

        .cover-edition {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #a08060;
            margin-top: 30px;
        }

        .cover-year {
            font-size: 14px;
            color: #d4a574;
            margin-top: 5px;
        }

        .handbook-page::-webkit-scrollbar {
            width: 8px;
        }

        .handbook-page::-webkit-scrollbar-track {
            background: #e8e0d0;
            border-radius: 4px;
        }

        .handbook-page::-webkit-scrollbar-thumb {
            background: #c4b49a;
            border-radius: 4px;
        }

        .handbook-page::-webkit-scrollbar-thumb:hover {
            background: #a08060;
        }

        @media (max-width: 768px) {
            .handbook-container {
                width: 95%;
                height: 90vh;
            }

            .handbook-spine {
                width: 25px;
                min-width: 25px;
            }

            .spine-text {
                font-size: 10px;
            }

            .handbook-page {
                padding: 30px 25px 80px 35px;
            }

            .page-title {
                font-size: 22px;
            }

            .handbook-nav {
                left: 25px;
                right: 25px;
            }

            .handbook-nav-btn span {
                display: none;
            }
        }


        /* =========================================
   RESULTS PANEL - FROM HANDOFF
   ========================================= */

/* Status badges for trials */
.status-recruiting { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
.status-completed { background: #e0e7ff; color: #3730a3; border: 1px solid #a5b4fc; }
.status-active { background: #fef3c7; color: #92400e; border: 1px solid #fcd34d; }
.status-terminated { background: #fecaca; color: #991b1b; border: 1px solid #fca5a5; }
.status-default { background: #f3f4f6; color: #374151; border: 1px solid #d1d5db; }

/* Source colors */
.source-trials { background: #059669; }
.source-fda { background: #dc2626; }
.source-ob { background: #ea580c; }
.source-pubmed { background: #2563eb; }

/* Source dots */
.source-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
    flex-shrink: 0;
}
.source-dot.trials { background: #059669; }
.source-dot.fda { background: #dc2626; }
.source-dot.ob { background: #ea580c; }
.source-dot.pubmed { background: #2563eb; }
.source-dot.stats { background: linear-gradient(135deg, #14807a, #247a64); }

/* Stats Tab Styling */
.results-tab.stats {
    border-color: var(--teal-200);
}
.results-tab.stats.active {
    background: linear-gradient(135deg, var(--teal-50), var(--forest-50));
    border-color: var(--teal-400);
    color: var(--teal-700);
}
.tab-count.stats {
    background: linear-gradient(135deg, var(--teal-100), var(--forest-100));
    color: var(--teal-700);
}

/* Stats Panel Content */
.stats-panel-content {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    height: 100%;
}

.stats-panel-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-subtle);
}

.stats-panel-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--teal-500) 0%, var(--forest-600) 100%);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stats-panel-icon svg {
    width: 22px;
    height: 22px;
    stroke: white;
}

.stats-panel-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--forest-700);
}

.stats-panel-summary {
    background: var(--surface-secondary);
    border-radius: 12px;
    padding: 16px;
    min-height: 0;
}

.stats-panel-chart {
    flex: 1;
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: var(--shadow-sm);
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.stats-panel-chart canvas {
    max-height: 350px !important;
}

/* Stats Summary Grid in Panel */
.stats-summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 12px;
}

.stats-summary-item {
    text-align: center;
    padding: 14px 10px;
    background: white;
    border-radius: 10px;
    box-shadow: var(--shadow-xs);
    transition: all 0.2s ease;
}

.stats-summary-item:hover {
    box-shadow: var(--shadow-sm);
    transform: translateY(-1px);
}

.stats-summary-item.highlight {
    background: linear-gradient(135deg, var(--forest-50) 0%, var(--teal-50) 100%);
    border: 1px solid var(--forest-200);
}

.stats-summary-item.large {
    grid-column: span 2;
    padding: 20px;
}

.stats-summary-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--forest-700);
    line-height: 1.2;
}

.stats-summary-item.large .stats-summary-value {
    font-size: 2rem;
}

.stats-summary-label {
    font-size: 0.6875rem;
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-top: 4px;
}


/* Modal Overlay */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: modalFadeIn 0.2s ease-out;
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Modal Container */
.modal-container {
    background: white;
    border-radius: 12px;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    max-width: 480px;
    width: 100%;
    animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Modal Header */
.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid #e5e7eb;
}

.modal-title {
    font-size: 18px;
    font-weight: 600;
    color: #111827;
    margin: 0;
}

.modal-close-btn {
    padding: 4px;
    border: none;
    background: none;
    color: #6b7280;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close-btn:hover {
    background: #f3f4f6;
    color: #111827;
}

/* Modal Body */
.modal-body {
    padding: 24px;
}

.modal-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 16px;
}

.modal-icon.warning {
    background: #fef3c7;
    color: #f59e0b;
}

.modal-icon.primary {
    background: #dbeafe;
    color: #3b82f6;
}

.modal-message {
    font-size: 14px;
    color: #4b5563;
    text-align: center;
    line-height: 1.6;
    margin: 0 0 12px 0;
}

.modal-conversation-title {
    font-size: 13px;
    color: #6b7280;
    text-align: center;
    font-weight: 500;
    padding: 8px 12px;
    background: #f9fafb;
    border-radius: 6px;
    margin: 0;
}

.modal-label {
    display: block;
    font-size: 13px;
    font-weight: 500;
    color: #374151;
    margin-bottom: 8px;
}

.modal-input {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 14px;
    color: #111827;
    transition: all 0.2s;
    font-family: inherit;
}

.modal-input:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.modal-input::placeholder {
    color: #9ca3af;
}

/* Modal Footer */
.modal-footer {
    display: flex;
    gap: 12px;
    padding: 16px 24px;
    border-top: 1px solid #e5e7eb;
    justify-content: flex-end;
}

.modal-btn {
    padding: 10px 20px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    font-family: inherit;
}

.modal-btn-secondary {
    background: white;
    color: #374151;
    border: 1px solid #d1d5db;
}

.modal-btn-secondary:hover {
    background: #f9fafb;
    border-color: #9ca3af;
}

.modal-btn-primary {
    background: #3b82f6;
    color: white;
}

.modal-btn-primary:hover {
    background: #2563eb;
}

.modal-btn-danger {
    background: #ef4444;
    color: white;
}

.modal-btn-danger:hover {
    background: #dc2626;
}

.modal-btn:active {
    transform: scale(0.98);
}

/* Responsive */
@media (max-width: 640px) {
    .modal-container {
        margin: 20px;
        max-width: calc(100% - 40px);
    }
    
    .modal-footer {
        flex-direction: column-reverse;
    }
    
    .modal-btn {
        width: 100%;
    }
}
/* Response Action Buttons */
.response-actions {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 16px;
    padding-top: 12px;
    border-top: 1px solid rgba(16, 185, 129, 0.1);
    flex-wrap: wrap;
}

.response-action-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: transparent;
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 6px;
    color: #059669;
    font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.response-action-btn:hover {
    background: rgba(16, 185, 129, 0.08);
    border-color: rgba(16, 185, 129, 0.35);
    color: #047857;
}

.response-action-btn:active {
    transform: scale(0.97);
}

.response-action-btn svg {
    flex-shrink: 0;
    color: currentColor;
}

.response-action-btn span {
    white-space: nowrap;
}

/* Responsive: Stack on smaller screens */
@media (max-width: 640px) {
    .response-actions {
        gap: 6px;
    }
    
    .response-action-btn {
        padding: 5px 10px;
        font-size: 12px;
    }
    
    .response-action-btn svg {
        width: 14px;
        height: 14px;
    }
}
/* =========================================
   CHART & STATS SECTION STYLES
   ========================================= */

.chart-section {
    margin-top: 16px;
    padding: 16px;
    background: linear-gradient(135deg, #f0f9f6 0%, #e6f5f0 100%);
    border-radius: 12px;
    border: 1px solid rgba(36, 122, 100, 0.15);
}

.chart-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(36, 122, 100, 0.1);
}

.chart-icon {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, var(--forest-500) 0%, var(--forest-600) 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chart-icon svg {
    width: 18px;
    height: 18px;
    stroke: white;
}

.chart-title {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--forest-700);
    flex: 1;
}

.chart-badge {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background: var(--forest-500);
    color: white;
    font-size: 0.6875rem;
    font-weight: 500;
    border-radius: 12px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.followup-badge {
    background: linear-gradient(135deg, var(--teal-500) 0%, var(--forest-500) 100%);
}

.chart-content {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.stats-container {
    min-height: 0;
}

.chart-container {
    background: white;
    border-radius: 8px;
    padding: 16px;
    box-shadow: var(--shadow-sm);
}

/* Stats Results Card */
.stats-results-card {
    background: white;
    border-radius: 8px;
    padding: 16px;
    box-shadow: var(--shadow-sm);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 12px;
    margin-bottom: 12px;
}

.stat-item {
    text-align: center;
    padding: 12px 8px;
    background: var(--surface-secondary);
    border-radius: 8px;
    transition: all 0.2s ease;
}

.stat-item:hover {
    background: var(--forest-50);
}

.stat-item.highlight {
    background: linear-gradient(135deg, var(--forest-100) 0%, var(--teal-100) 100%);
    border: 1px solid var(--forest-200);
}

.stat-item.large {
    padding: 24px 16px;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--forest-700);
    line-height: 1.2;
}

.stat-item.large .stat-value {
    font-size: 2.5rem;
}

.stat-label {
    font-size: 0.6875rem;
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-top: 4px;
}

.stat-footnote {
    font-size: 0.75rem;
    color: var(--gray-500);
    text-align: center;
    padding-top: 8px;
    border-top: 1px solid var(--border-subtle);
}

/* Stats Distribution */
.stats-distribution {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.distribution-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: var(--surface-secondary);
    border-radius: 6px;
    transition: background 0.15s ease;
}

.distribution-row:hover {
    background: var(--forest-50);
}

.distribution-label {
    font-size: 0.8125rem;
    color: var(--gray-700);
    font-weight: 500;
}

.distribution-value {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--forest-600);
    background: var(--forest-100);
    padding: 2px 10px;
    border-radius: 10px;
}

/* Stats Filters */
.stats-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 12px;
}

.filter-badge {
    font-size: 0.6875rem;
    padding: 4px 10px;
    background: var(--teal-100);
    color: var(--teal-700);
    border-radius: 10px;
    font-weight: 500;
}

/* Followup Indicator */
.followup-indicator {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    background: linear-gradient(135deg, var(--teal-100) 0%, var(--forest-100) 100%);
    color: var(--forest-700);
    font-size: 0.6875rem;
    font-weight: 500;
    border-radius: 8px;
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

/* Results Panel */
.results-panel {
    width: 720px;
    min-width: 620px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    background: #ffffff;
    border-left: 1px solid #e5e7eb;
    height: 100%;
    overflow: hidden;
    animation: slideInRight 0.35s cubic-bezier(0.16, 1, 0.3, 1);
}

.results-panel.hidden {
    display: none;
}

@keyframes slideInRight {
    from { opacity: 0; transform: translateX(40px); }
    to { opacity: 1; transform: translateX(0); }
}

/* Results Header */
.results-header {
    border-bottom: 1px solid #e5e7eb;
    padding: 12px 16px;
    background: #f9fafb;
    flex-shrink: 0;
}

.results-header-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
}

.results-header-title {
   font-weight: 300;
    color: #111827;
    font-size: 0.875rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

.results-close-btn {
    padding: 6px;
    border-radius: 8px;
    background: transparent;
    border: none;
    cursor: pointer;
    color: #6b7280;
    transition: all 0.15s ease;
}

.results-close-btn:hover {
    background: #e5e7eb;
    color: #374151;
}

/* Tabs Container */
.results-tabs {
    display: flex;
    gap: 4px;
    padding: 4px;
    background: #f3f4f6;
    border-radius: 12px;
}

.results-tab {
    flex: 1;
    padding: 8px 12px;
    font-size: 0.75rem;
    font-weight: 300;
    border-radius: 8px;
    border: none;
    background: transparent;
    color: #6b7280;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: all 0.2s ease;
    position: relative;
}

.results-tab:hover {
    color: #111827;
}

.results-tab.active {
    background: #ffffff;
    color: #111827;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.results-tab.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 2px;
    border-radius: 1px;
}

.results-tab.active.trials::after { background: #059669; }
.results-tab.active.fda::after { background: #dc2626; }
.results-tab.active.ob::after { background: #ea580c; }
.results-tab.active.pubmed::after { background: #2563eb; }

.tab-count {
    font-size: 0.625rem;
   font-weight: 300;
    padding: 2px 6px;
    border-radius: 4px;
}

.tab-count.trials { background: #dcfce7; color: #166534; }
.tab-count.fda { background: #fee2e2; color: #991b1b; }
.tab-count.ob { background: #ffedd5; color: #9a3412; }
.tab-count.pubmed { background: #dbeafe; color: #1e40af; }

/* Results Content */
.results-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.results-content::-webkit-scrollbar {
    width: 6px;
}

.results-content::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 3px;
}

.results-content::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
}

.results-content::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}

.results-tab-content {
    display: none;
}

.results-tab-content.active {
    display: block;
}

.results-cards {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Result Card Base */
.result-card {
    background: #ffffff;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    padding: 16px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    transition: all 0.2s ease;
}

.result-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: #d1d5db;
}

.result-card-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;
    margin-bottom: 8px;
}

.result-card-id {
    font-size: 0.75rem;
    font-family: 'Monaco', 'Courier New', monospace;
    text-decoration: none;
    transition: color 0.15s ease;
}

.result-card-id:hover {
    text-decoration: underline;
}

.result-card-id.trials { color: #059669; }
.result-card-id.fda { color: #dc2626; }
.result-card-id.ob { color: #ea580c; }
.result-card-id.pubmed { color: #2563eb; }

.result-card-status {
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.625rem;
    font-weight: 300;
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

.result-card-title {
    font-weight: 300;
    color: #111827;
    font-size: 0.875rem;
    line-height: 1.4;
    margin-bottom: 8px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.result-card-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 8px 12px;
    font-size: 0.6875rem;
    color: #6b7280;
    margin-bottom: 8px;
}

.result-card-meta strong {
    color: #374151;
   font-weight: 300;
}

.result-card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

.result-tag {
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.625rem;
    font-weight: 300;
}

.result-tag.condition { background: #dbeafe; color: #1e40af; border: 1px solid #bfdbfe; }
.result-tag.intervention { background: #f3e8ff; color: #7c3aed; border: 1px solid #ddd6fe; }
.result-tag.ingredient { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
.result-tag.pubtype { background: #dbeafe; color: #1e40af; border: 1px solid #bfdbfe; }

.result-card-summary {
    font-size: 0.6875rem;
    color: #9ca3af;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Orange Book specific */
.ob-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 12px;
}

.ob-stat {
    text-align: center;
    padding: 8px;
    border-radius: 8px;
}

.ob-stat.branded { background: #dbeafe; border: 1px solid #bfdbfe; }
.ob-stat.generic { background: #dcfce7; border: 1px solid #86efac; }
.ob-stat.patents { background: #ffedd5; border: 1px solid #fed7aa; }

.ob-stat-value {
    font-size: 1.25rem;
    font-weight: 700;
}

.ob-stat.branded .ob-stat-value { color: #1e40af; }
.ob-stat.generic .ob-stat-value { color: #166534; }
.ob-stat.patents .ob-stat-value { color: #9a3412; }

.ob-stat-label {
    font-size: 0.625rem;
    font-weight: 300;
}

.ob-stat.branded .ob-stat-label { color: #3b82f6; }
.ob-stat.generic .ob-stat-label { color: #22c55e; }
.ob-stat.patents .ob-stat-label { color: #ea580c; }

.ob-section-title {
    font-size: 0.625rem;
   font-weight: 300;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 6px;
}

.ob-patents-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 8px;
}

.ob-patent-item {
    display: flex;
    justify-content: space-between;
    padding: 6px 10px;
    background: #fff7ed;
    border-radius: 6px;
    border: 1px solid #fed7aa;
    font-size: 0.6875rem;
}

.ob-patent-no {
    font-family: 'Monaco', 'Courier New', monospace;
    color: #9a3412;
}

.ob-patent-exp {
    color: #ea580c;
}

.ob-exclusivities {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

.ob-exclusivity-tag {
    padding: 2px 8px;
    background: #f3e8ff;
    color: #7c3aed;
    border-radius: 4px;
    font-size: 0.625rem;
    border: 1px solid #ddd6fe;
}

.ob-trade-names {
    font-size: 0.625rem;
    color: #6b7280;
    padding-top: 8px;
    margin-top: 8px;
    border-top: 1px solid #f3f4f6;
}

/* PubMed specific */
.pubmed-authors {
    font-size: 0.6875rem;
    color: #374151;
    margin-bottom: 8px;
}

.pubmed-journal {
    font-weight: 300;
    color: #2563eb;
}

.pubmed-doi {
    font-size: 0.625rem;
    color: #9ca3af;
    padding-top: 8px;
    margin-top: 8px;
    border-top: 1px solid #f3f4f6;
    word-break: break-all;
}

.pubmed-doi a {
    color: #6b7280;
    text-decoration: none;
}

.pubmed-doi a:hover {
    color: #2563eb;
}

/* Pagination */
.results-pagination {
    border-top: 1px solid #e5e7eb;
    padding: 12px 16px;
    background: #f9fafb;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.results-pagination.hidden {
    display: none;
}

.pagination-btn {
    padding: 6px 12px;
    font-size: 0.75rem;
    font-weight: 300;
    color: #374151;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: all 0.15s ease;
}

.pagination-btn:hover:not(:disabled) {
    background: #f9fafb;
    border-color: #d1d5db;
}

.pagination-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.pagination-info {
    font-size: 0.75rem;
    color: #6b7280;
}

/* Chat panel adjustment when results open */
.chat-wrapper.with-results {
    flex: 1;
    min-width: 0;
}

.chat-wrapper.with-results #chatdiv {
    margin-inline: 24px;
}

/* Source badges for AI response */
.source-badges {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    margin-bottom: 8px;
}

.source-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.625rem;
    font-weight: 300;
}

.source-badge.trials {
    background: #dcfce7;
    color: #166534;
    border: 1px solid #86efac;
}

.source-badge.fda {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #fecaca;
}

.source-badge.ob {
    background: #ffedd5;
    color: #9a3412;
    border: 1px solid #fed7aa;
}

.source-badge.pubmed {
    background: #dbeafe;
    color: #1e40af;
    border: 1px solid #bfdbfe;
}

/* Empty state */
.results-empty {
    text-align: center;
    padding: 48px 24px;
}

.results-empty-icon {
    width: 48px;
    height: 48px;
    color: #d1d5db;
    margin: 0 auto 8px;
}

.results-empty-text {
    font-size: 0.75rem;
    color: #9ca3af;
}

/* =========================================
   ENHANCED TRIALS DISPLAY - TIMELINE & FILTERS
   ========================================= */

/* Toggle switch styles */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 48px;
    height: 24px;
}
.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}
.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #e2e8f0;
    transition: .4s;
    border-radius: 24px;
}
.toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .3s;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
input:checked + .toggle-slider {
    background-color: #3b82f6;
}
input:checked + .toggle-slider.green {
    background-color: #10b981;
}
input:checked + .toggle-slider.purple {
    background-color: #8b5cf6;
}
input:checked + .toggle-slider:before {
    transform: translateX(24px);
}

/* Phase filter buttons */
.phase-btn {
    transition: all 0.2s ease;
    transform-origin: center;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    cursor: pointer;
    position: relative;
    overflow: hidden;
}
.phase-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.phase-btn.active {
    transform: scale(1.05);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    border-width: 2px;
}
.phase-btn:not(.active) {
    opacity: 0.6;
    background-color: #f9fafb !important;
    border-color: #e5e7eb !important;
}
.phase-btn .active-indicator {
    position: absolute;
    top: 4px;
    right: 4px;
    background-color: #10b981;
    color: white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    opacity: 0;
    transform: scale(0);
    transition: all 0.2s ease;
}
.phase-btn.active .active-indicator {
    opacity: 1;
    transform: scale(1);
}
.phase-btn .phase-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
    transition: all 0.2s ease;
}
.phase-btn.active .phase-dot {
    transform: scale(1.5);
}

/* Filter section */
.trials-filter-section {
    transition: all 0.3s ease;
    margin-bottom: 16px;
}
.trials-filter-section:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}
.selected-phases-text {
    font-size: 13px;
    color: #4b5563;
    margin-top: 8px;
    transition: all 0.3s ease;
    line-height: 1.5;
}
.selected-phases-text .phase-name {
    font-weight: 300;
    color: #1e40af;
    padding: 1px 6px;
    border-radius: 4px;
    background-color: #eff6ff;
    display: inline-block;
    margin: 0 2px;
}

/* Timeline visualization */
.trials-timeline {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 16px;
    border: 1px solid #e2e8f0;
    padding: 20px;
    margin-bottom: 16px;
}
.timeline-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}
.timeline-title {
    font-size: 1rem;
   font-weight: 300;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 8px;
}
.timeline-phases {
    display: flex;
    gap: 4px;
    align-items: center;
    width: 100%;
    margin-top: 12px;
}
.timeline-phase-bar {
    flex: 1;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease;
}
.timeline-phase-bar:hover {
    transform: scaleY(1.1);
    filter: brightness(1.05);
}
.timeline-phase-bar .phase-count {
    font-size: 12px;
   font-weight: 300;
    color: white;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
.timeline-phase-bar.phase-preclinical { background: linear-gradient(135deg, #6366f1, #4f46e5); }
.timeline-phase-bar.phase-1 { background: linear-gradient(135deg, #22c55e, #16a34a); }
.timeline-phase-bar.phase-1-2 { background: linear-gradient(135deg, #14b8a6, #0d9488); }
.timeline-phase-bar.phase-2 { background: linear-gradient(135deg, #06b6d4, #0891b2); }
.timeline-phase-bar.phase-3 { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
.timeline-phase-bar.phase-4 { background: linear-gradient(135deg, #6366f1, #4f46e5); }

.timeline-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 16px;
    padding-top: 12px;
    border-top: 1px solid #e2e8f0;
}
.timeline-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: #64748b;
}
.timeline-legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

/* Study card enhancements */
.study-card-enhanced {
    background: white;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    padding: 16px;
    margin-bottom: 12px;
    transition: all 0.2s ease;
}
.study-card-enhanced:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    border-color: #d1d5db;
}
.study-card-enhanced .card-header {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
    margin-bottom: 12px;
}
.study-card-enhanced .phase-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 300;
}
.study-card-enhanced .status-badge {
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 300;
    text-transform: uppercase;
    letter-spacing: 0.02em;
}
.study-card-enhanced .nct-id {
    font-family: 'Monaco', 'Courier New', monospace;
    font-size: 12px;
    color: #059669;
    margin-left: auto;
}
.study-card-enhanced .has-results-badge {
    background: #dcfce7;
    color: #166534;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 10px;
   font-weight: 300;
}
.study-card-enhanced .card-title {
    font-size: 15px;
    font-weight: 300;
    color: #1f2937;
    line-height: 1.4;
    margin-bottom: 8px;
}
.study-card-enhanced .card-sponsor {
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 12px;
}
.study-card-enhanced .card-actions {
    display: flex;
    gap: 12px;
}
.study-card-enhanced .card-action-btn {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 300;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    background: transparent;
}
.study-card-enhanced .view-btn {
    color: #2563eb;
}
.study-card-enhanced .view-btn:hover {
    background: #eff6ff;
}
.study-card-enhanced .external-btn {
    color: #6b7280;
}
.study-card-enhanced .external-btn:hover {
    color: #374151;
    background: #f3f4f6;
}

/* Study detail modal */
.study-detail-modal {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
}
.study-detail-content {
    background: white;
    border-radius: 20px;
    max-width: 900px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: 0 25px 50px rgba(0,0,0,0.25);
    display: flex;
    flex-direction: column;
}
.study-detail-header {
    padding: 20px 24px;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
}
.study-detail-title {
    font-size: 18px;
   font-weight: 300;
    color: #1f2937;
    line-height: 1.4;
}
.study-detail-close {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    border: 1px solid #e5e7eb;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #6b7280;
    transition: all 0.2s ease;
    flex-shrink: 0;
}
.study-detail-close:hover {
    background: #f3f4f6;
    color: #374151;
}
.study-detail-body {
    padding: 24px;
    overflow-y: auto;
    flex: 1;
}
.study-detail-section {
    margin-bottom: 24px;
}
.study-detail-section:last-child {
    margin-bottom: 0;
}
.study-detail-section-title {
    font-size: 14px;
   font-weight: 300;
    color: #374151;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 2px solid #e5e7eb;
    display: flex;
    align-items: center;
    gap: 8px;
}
.study-detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}
.study-detail-item {
    padding: 12px;
    background: #f9fafb;
    border-radius: 10px;
}
.study-detail-label {
    font-size: 11px;
   font-weight: 300;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 4px;
}
.study-detail-value {
    font-size: 14px;
    color: #1f2937;
    font-weight: 300;
}
.study-detail-description {
    font-size: 14px;
    line-height: 1.7;
    color: #4b5563;
}
.study-detail-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}
.study-detail-tag {
    padding: 4px 12px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 300;
}
.study-detail-tag.condition {
    background: #dbeafe;
    color: #1e40af;
}
.study-detail-tag.intervention {
    background: #f3e8ff;
    color: #7c3aed;
}

/* Small Toggle Switches for Filters */
.toggle-switch-small {
    position: relative;
    display: inline-block;
    width: 36px;
    height: 20px;
}
.toggle-switch-small input {
    opacity: 0;
    width: 0;
    height: 0;
}
.toggle-slider-small {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #e2e8f0;
    transition: .3s;
    border-radius: 20px;
}
.toggle-slider-small:before {
    position: absolute;
    content: "";
    height: 14px;
    width: 14px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .2s;
    border-radius: 50%;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
}
.toggle-switch-small input:checked + .toggle-slider-small {
    background-color: #3b82f6;
}
.toggle-switch-small input:checked + .toggle-slider-small.green {
    background-color: #10b981;
}
.toggle-switch-small input:checked + .toggle-slider-small.purple {
    background-color: #8b5cf6;
}
.toggle-switch-small input:checked + .toggle-slider-small:before {
    transform: translateX(16px);
}

/* Timeline Phase Bars */
.trials-timeline {
    border: 1px solid var(--border-default);
}
.timeline-phase-bar {
    transition: width 0.3s ease;
    min-width: 2px;
}
.timeline-phase-bar.pre-phase,
.timeline-phase-bar.pre_phase {
    background: linear-gradient(135deg, #6366f1, #818cf8);
}
.timeline-phase-bar.phase1,
.timeline-phase-bar.early-phase1 {
    background: linear-gradient(135deg, #22c55e, #4ade80);
}
.timeline-phase-bar.phase1-phase2,
.timeline-phase-bar.phase1_phase2 {
    background: linear-gradient(135deg, #14b8a6, #2dd4bf);
}
.timeline-phase-bar.phase2 {
    background: linear-gradient(135deg, #06b6d4, #22d3ee);
}
.timeline-phase-bar.phase2-phase3,
.timeline-phase-bar.phase2_phase3 {
    background: linear-gradient(135deg, #a855f7, #c084fc);
}
.timeline-phase-bar.phase3 {
    background: linear-gradient(135deg, #8b5cf6, #a78bfa);
}
.timeline-phase-bar.phase4 {
    background: linear-gradient(135deg, #6366f1, #818cf8);
}

/* Trials Filter Section */
.trials-filter-section {
    border-radius: 0;
    border-bottom: 1px solid #e5e7eb;
}
.trials-filter-section .phase-btn {
    position: relative;
    font-weight: 300;
}
.trials-filter-section .phase-btn .phase-dot {
    display: inline-block;
    width: 6px;
    height: 6px;
    border-radius: 50%;
}
.trials-filter-section .phase-btn:not(.active) {
    opacity: 0.5;
}
.trials-filter-section .phase-btn.active {
   font-weight: 300;
}

/* Enhanced Study Card */
.study-card-enhanced {
    transition: all 0.2s ease;
}
.study-card-enhanced:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-color: var(--forest-300);
}
.trials-cards-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Line clamp utility */
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Multiple Charts Layout */
.chart-item-wrapper {
    margin-bottom: 24px;
}

.chart-item-wrapper:last-child {
    margin-bottom: 0;
}

.chart-item-container {
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: var(--shadow-sm);
    width: 100%;
    min-height: 300px;
}

/* Data View Buttons */
.data-view-button {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    padding: 14px 16px;
    margin-bottom: 8px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
}

.data-view-button:hover {
    border-color: #10b981;
    background: #f0fdf4;
    transform: translateX(4px);
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15);
}

.data-view-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.data-view-icon svg {
    width: 20px;
    height: 20px;
    stroke: white;
}

.data-view-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.data-view-label {
    font-weight: 500;
    font-size: 0.875rem;
    color: #111827;
}

.data-view-count {
    font-weight: 300;
    font-size: 0.75rem;
    color: #6b7280;
}

.data-view-arrow {
    width: 16px;
    height: 16px;
    color: #9ca3af;
    flex-shrink: 0;
    transition: transform 0.2s ease;
}

.data-view-button:hover .data-view-arrow {
    transform: translateX(2px);
    color: #10b981;
}

/* =========================================
   INLINE CITATION CARDS
   ========================================= */

.inline-cite-card {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 16px 0;
    padding: 12px 14px;
    background: #f9fafb;
    border-left: 3px solid #10b981;
    border-radius: 6px;
    transition: all 0.2s ease;
}

.inline-cite-card:hover {
    background: white;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    border-left-color: #059669;
}

.cite-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.cite-icon svg {
    width: 18px;
    height: 18px;
    stroke: white;
}

.cite-content {
    flex: 1;
    min-width: 0;
}

.cite-title {
    font-size: 0.875rem;
    font-weight: 500;
    color: #111827;
    margin-bottom: 3px;
    line-height: 1.4;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.cite-subtitle {
    font-size: 0.75rem;
    font-weight: 300;
    color: #6b7280;
    line-height: 1.3;
}

/* =========================================
   DATA VIEW CARDS (Bottom of report)
   ========================================= */
/* 
.data-cards-inline {
    margin-top: 24px;
    padding-top: 24px;
    border-top: 1px solid #e5e7eb;
} */

.data-cards-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.data-view-card {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 16px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    margin: 15px;
}

.data-view-card:hover {
    border-color: #10b981;
    background: #f9fafb;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.data-view-card-icon {
    width: 44px;
    height: 44px;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.data-view-card-icon svg {
    width: 22px;
    height: 22px;
    stroke: white;
}

.data-view-card-content {
    flex: 1;
    min-width: 0;
}

.data-view-card-title {
    font-size: 0.9375rem;
    font-weight: 500;
    color: #111827;
    margin-bottom: 2px;
    line-height: 1.3;
}

.data-view-card-subtitle {
    font-size: 0.8125rem;
    font-weight: 300;
    color: #6b7280;
    line-height: 1.2;
}

.data-view-card-action {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 7px 14px;
    background: white;
    border: 1px solid #d1d5db;
    border-radius: 7px;
    font-size: 0.8125rem;
    font-weight: 500;
    color: #374151;
    transition: all 0.15s ease;
    flex-shrink: 0;
}

.data-view-card:hover .data-view-card-action {
    background: #f3f4f6;
    border-color: #10b981;
    color: #059669;
}

.data-view-card-arrow {
    width: 14px;
    height: 14px;
    color: #9ca3af;
    transition: transform 0.2s ease;
}

.data-view-card:hover .data-view-card-arrow {
    transform: translateX(2px);
    color: #10b981;
}

/* =========================================
   MISSING CITATION INDICATOR
   Add this to the <style> section of ai.html
   ========================================= */

/* Show when a citation marker exists but data is missing */
.citation-missing {
    display: inline;
    padding: 2px 8px;
    font-size: 0.7rem;
    color: #9ca3af;
    background: #f9fafb;
    border-radius: 4px;
    border: 1px dashed #e5e7eb;
    font-family: 'IBM Plex Mono', monospace;
    margin: 0 2px;
    vertical-align: middle;
}

.citation-missing:hover {
    background: #f3f4f6;
    border-color: #d1d5db;
    cursor: help;
}

/* Tooltip styling for missing citations */
.citation-missing[title] {
    position: relative;
}

/* Make the inline cite cards flow better in text */
.inline-cite-card {
    display: inline-flex;  /* Changed from flex to inline-flex */
    align-items: center;
    gap: 10px;
    margin: 8px 0;
    padding: 10px 12px;
    background: #f9fafb;
    border-left: 3px solid #10b981;
    border-radius: 6px;
    transition: all 0.2s ease;
    max-width: 100%;
}

/* Alternative: Block-level cards for full-width display */
.inline-cite-card.block {
    display: flex;
    width: 100%;
}

/* Compact variant for inline use */
.inline-cite-card.compact {
    padding: 6px 10px;
    margin: 4px 0;
    gap: 8px;
}

.inline-cite-card.compact .cite-icon {
    width: 28px;
    height: 28px;
}

.inline-cite-card.compact .cite-icon svg {
    width: 14px;
    height: 14px;
}

.inline-cite-card.compact .cite-title {
    font-size: 0.8125rem;
    -webkit-line-clamp: 1;
}

.inline-cite-card.compact .cite-subtitle {
    font-size: 0.6875rem;
}
/* ============================================
   LOGIN NOTIFICATION TOAST
   ============================================ */
.login-toast {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 20px;
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(5, 150, 105, 0.3);
    color: white;
    animation: slideInRight 0.4s ease-out, fadeOut 0.4s ease-in 3.6s forwards;
    max-width: 360px;
}

.login-toast-avatar {
    width: 44px;
    height: 44px;
    background: rgba(255,255,255,0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 1rem;
    flex-shrink: 0;
}

.login-toast-content {
    flex: 1;
}

.login-toast-title {
    font-weight: 600;
    font-size: 0.9375rem;
    margin-bottom: 2px;
}

.login-toast-subtitle {
    font-size: 0.8125rem;
    opacity: 0.9;
}

.login-toast-close {
    padding: 4px;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.login-toast-close:hover {
    opacity: 1;
}

@keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; transform: translateX(0); }
    to { opacity: 0; transform: translateX(20px); }
}

/* ============================================
   ACCOUNT MANAGEMENT MODAL
   ============================================ */
.account-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.account-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.account-modal {
    background: white;
    border-radius: 16px;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.2);
    width: 100%;
    max-width: 560px;
    max-height: 90vh;
    overflow: hidden;
    transform: scale(0.95) translateY(20px);
    transition: transform 0.3s ease;
}

.account-modal-overlay.active .account-modal {
    transform: scale(1) translateY(0);
}

.account-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid #e5e7eb;
    background: linear-gradient(135deg, #f0fdf4 0%, #ecfeff 100%);
}

.account-modal-title {
    font-weight: 600;
    font-size: 1.125rem;
    color: #111827;
    display: flex;
    align-items: center;
    gap: 10px;
}

.account-modal-close {
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.2s;
    color: #6b7280;
}

.account-modal-close:hover {
    background: #f3f4f6;
    color: #111827;
}

.account-modal-body {
    padding: 0;
    max-height: calc(90vh - 140px);
    overflow-y: auto;
}

.account-modal-nav {
    display: flex;
    border-bottom: 1px solid #e5e7eb;
    background: #f9fafb;
    padding: 0 24px;
}

.account-nav-tab {
    padding: 14px 20px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
    margin-bottom: -1px;
}

.account-nav-tab:hover {
    color: #111827;
}

.account-nav-tab.active {
    color: #059669;
    border-bottom-color: #059669;
    background: white;
}

.account-section {
    padding: 24px;
    display: none;
}

.account-section.active {
    display: block;
}

.account-user-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 24px;
}

.account-avatar-large {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 1.5rem;
    flex-shrink: 0;
}

.account-user-details h3 {
    font-weight: 600;
    font-size: 1.25rem;
    color: #111827;
    margin-bottom: 4px;
}

.account-user-details p {
    font-size: 0.875rem;
    color: #6b7280;
}

.account-user-details .badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background: #ecfdf5;
    color: #059669;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    margin-top: 8px;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    font-size: 0.8125rem;
    font-weight: 500;
    color: #374151;
    margin-bottom: 6px;
}

.form-input {
    width: 100%;
    padding: 10px 14px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 0.9375rem;
    transition: all 0.2s;
}

.form-input:focus {
    outline: none;
    border-color: #059669;
    box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.btn-primary {
    padding: 10px 20px;
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-primary:hover {
    box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
    transform: translateY(-1px);
}

.btn-secondary {
    padding: 10px 20px;
    background: white;
    color: #374151;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-secondary:hover {
    background: #f9fafb;
    border-color: #9ca3af;
}

.btn-danger {
    padding: 10px 20px;
    background: #fef2f2;
    color: #dc2626;
    border: 1px solid #fecaca;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-danger:hover {
    background: #fee2e2;
    border-color: #f87171;
}

.session-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 16px;
    background: #f9fafb;
    border-radius: 10px;
    margin-bottom: 10px;
}

.session-item.current {
    background: #ecfdf5;
    border: 1px solid #a7f3d0;
}

.session-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.session-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6b7280;
}

.session-details h4 {
    font-weight: 500;
    font-size: 0.875rem;
    color: #111827;
}

.session-details p {
    font-size: 0.75rem;
    color: #6b7280;
}

.usage-stat {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: #f9fafb;
    border-radius: 10px;
    margin-bottom: 10px;
}

.usage-stat-label {
    font-size: 0.875rem;
    color: #6b7280;
}

.usage-stat-value {
    font-weight: 600;
    font-size: 1.125rem;
    color: #111827;
}

/* ============================================
   CONVERSATIONS LIST ENHANCED
   ============================================ */
.conversation-list-container {
    max-height: calc(100vh - 400px);
    overflow-y: auto;
    padding: 4px 0;
}

.conversation-list-container::-webkit-scrollbar {
    width: 4px;
}

.conversation-list-container::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 2px;
}

.conversation-list-container::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

.conv-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    margin: 2px 8px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.15s ease;
    position: relative;
}

.conv-item:hover {
    background: #f3f4f6;
}

.conv-item.active {
    background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
    border: 1px solid #a7f3d0;
}

.conv-item-icon {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background: #f3f4f6;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    color: #6b7280;
}

.conv-item.active .conv-item-icon {
    background: #d1fae5;
    color: #059669;
}

.conv-item-content {
    flex: 1;
    min-width: 0;
}

.conv-item-title {
    font-size: 0.8125rem;
    font-weight: 500;
    color: #111827;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 2px;
}

.conv-item-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.6875rem;
    color: #9ca3af;
}

.conv-item-badges {
    display: flex;
    gap: 4px;
    margin-top: 4px;
}

.conv-badge {
    font-size: 0.5625rem;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 500;
}

.conv-badge.trials {
    background: #d1fae5;
    color: #047857;
}

.conv-badge.fda {
    background: #dbeafe;
    color: #1d4ed8;
}

.conv-badge.pubmed {
    background: #fef3c7;
    color: #b45309;
}

.conv-item-actions {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    gap: 2px;
    opacity: 0;
    transition: opacity 0.15s;
    
}

.conv-item:hover .conv-item-actions {
    opacity: 1;
}

.conv-action-btn {
    padding: 4px;
    border-radius: 4px;
    cursor: pointer;
    /* color: #0f172a; */
    transition: all 0.15s;
        background: #1a4a3f;
    color: #ffffff;
}

.conv-action-btn.delete {
    padding: 4px;
    border-radius: 4px;
    cursor: pointer;
    /* color: #0f172a; */
    transition: all 0.15s;
      background: #fee2e2;
    color: #dc2626;
}

.conv-action-btn:hover {
    background: #1a4a3f70;
    color: #ffffff;
}

.conv-action-btn.delete:hover {
    background: #fee2e270;
    color: #dc2626;
}

/* ============================================
   MY FILES SECTION
   ============================================ */
.files-section {
    margin-top: 8px;
}

.files-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
}

.files-title {
    font-size: 0.6875rem;
    font-weight: 600;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.files-list {
    padding: 0 8px;
}

.file-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.15s;
}

.file-item:hover {
    background: #f3f4f6;
}

.file-icon {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.file-icon.pdf { background: #fef2f2; color: #dc2626; }
.file-icon.doc { background: #eff6ff; color: #2563eb; }
.file-icon.xls { background: #f0fdf4; color: #16a34a; }
.file-icon.folder { background: #fef3c7; color: #d97706; }

.file-info {
    flex: 1;
    min-width: 0;
}

.file-name {
    font-size: 0.8125rem;
    font-weight: 500;
    color: #111827;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.file-meta {
    font-size: 0.6875rem;
    color: #9ca3af;
}

.files-empty {
    padding: 20px;
    text-align: center;
    color: #9ca3af;
    font-size: 0.8125rem;
}

/* ============================================
   ENHANCED USER PROFILE (SIDEBAR FOOTER)
   ============================================ */
.user-profile-enhanced {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    margin: 8px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s;
    background: #f9fafb;
    border: 1px solid transparent;
}

.user-profile-enhanced:hover {
    background: #f3f4f6;
    border-color: #e5e7eb;
}

.user-profile-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 0.875rem;
    flex-shrink: 0;
}

.user-profile-info {
    flex: 1;
    min-width: 0;
}

.user-profile-name {
    font-weight: 500;
    font-size: 0.875rem;
    color: #111827;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-profile-email {
    font-size: 0.75rem;
    color: #6b7280;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-profile-chevron {
    color: #9ca3af;
    transition: transform 0.2s;
}

.user-profile-enhanced:hover .user-profile-chevron {
    transform: rotate(180deg);
}

/* ============================================
   CHAT MESSAGE RENDERING
   ============================================ */
.chat-message {
    margin-bottom: 20px;
    animation: messageSlideIn 0.3s ease-out;
}

@keyframes messageSlideIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.chat-message-user {
    display: flex;
    justify-content: flex-end;
}

.chat-message-user .message-bubble {
    max-width: 75%;
    background: linear-gradient(135deg, #1e5c4d 0%, #1a4a3f 100%);
    color: white;
    padding: 14px 18px;
    border-radius: 18px 18px 4px 18px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.chat-message-assistant {
    display: flex;
    justify-content: flex-start;
    gap: 12px;
}

.assistant-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.assistant-avatar img {
    width: 24px;
    height: 24px;
}

.chat-message-assistant .message-bubble {
    max-width: 85%;
    background: white;
    border: 1px solid #e5e7eb;
    padding: 16px 20px;
    border-radius: 4px 18px 18px 18px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.message-content {
    font-size: 0.9375rem;
    line-height: 1.6;
}

.message-content h1, .message-content h2, .message-content h3 {
    margin: 16px 0 8px 0;
    font-weight: 600;
}

.message-content h1 { font-size: 1.25rem; }
.message-content h2 { font-size: 1.125rem; }
.message-content h3 { font-size: 1rem; }

.message-content p {
    margin-bottom: 12px;
}

.message-content ul, .message-content ol {
    margin: 12px 0;
    padding-left: 24px;
}

.message-content li {
    margin-bottom: 6px;
}

.message-content code {
    background: #f3f4f6;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.875em;
}

.message-content pre {
    background: #1f2937;
    color: #f9fafb;
    padding: 16px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 12px 0;
}

.message-content pre code {
    background: transparent;
    padding: 0;
}

.message-time {
    font-size: 0.6875rem;
    color: #9ca3af;
    margin-top: 6px;
    text-align: right;
}

/* ============================================
   LOADING STATES
   ============================================ */
.conv-loading {
    padding: 20px;
    text-align: center;
}

.conv-loading-spinner {
    display: inline-flex;
    gap: 4px;
}

.conv-loading-dot {
    width: 8px;
    height: 8px;
    background: #059669;
    border-radius: 50%;
    animation: convLoadingBounce 1.4s ease-in-out infinite;
}

.conv-loading-dot:nth-child(1) { animation-delay: 0s; }
.conv-loading-dot:nth-child(2) { animation-delay: 0.2s; }
.conv-loading-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes convLoadingBounce {
    0%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-8px); }
}

/* ============================================
   SIDEBAR STYLES - New Design
   ============================================ */

.sidebar {
    width: 260px;
    min-width: 260px;
    background: #fafafa;
    border-right: 1px solid #e5e7eb;
    display: flex;
    flex-direction: column;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 40;
}

.sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px 12px;
}

/* Navigation Items */
.sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 2px;
    margin-bottom: 24px;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #6b7280;
    font-size: 14px;
    font-weight: 400;
    border: none;
    background: transparent;
    text-align: left;
    width: 100%;
}

.nav-item:hover {
    background: #f3f4f6;
    color: #111827;
}

.nav-item.active {
    background: #ffffff;
    color: #111827;
    font-weight: 500;
}

.nav-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

/* Conversation Starters */
.conversation-starters {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.starter-section {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.starter-header {
    font-size: 11px;
    font-weight: 600;
    color: #9ca3af;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 8px 12px 4px 12px;
}

.starter-item {
    display: block;
    padding: 10px 12px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #6b7280;
    font-size: 13px;
    font-weight: 400;
    border: none;
    background: transparent;
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.starter-item:hover {
    background: #f3f4f6;
    color: #111827;
}

/* Sidebar Footer */
.sidebar-footer {
    padding: 12px;
    border-top: 1px solid #e5e7eb;
    background: #ffffff;
}

.user-profile-enhanced {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.2s ease;
}

.user-profile-enhanced:hover {
    background: #f3f4f6;
}

.user-profile-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 600;
    flex-shrink: 0;
}

.user-profile-info {
    flex: 1;
    min-width: 0;
}

.user-profile-name {
    font-size: 13px;
    font-weight: 500;
    color: #111827;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-profile-email {
    font-size: 11px;
    color: #6b7280;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.user-profile-chevron {
    flex-shrink: 0;
    color: #9ca3af;
}

/* Loading States */
.conv-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 24px 12px;
}

.conv-loading-spinner {
    display: flex;
    gap: 6px;
    margin-bottom: 8px;
}

.conv-loading-dot {
    width: 8px;
    height: 8px;
    background: #10b981;
    border-radius: 50%;
    animation: bounce 1.4s infinite ease-in-out both;
}

.conv-loading-dot:nth-child(1) {
    animation-delay: -0.32s;
}

.conv-loading-dot:nth-child(2) {
    animation-delay: -0.16s;
}

@keyframes bounce {
    0%, 80%, 100% {
        transform: scale(0);
    }
    40% {
        transform: scale(1);
    }
}

/* Scrollbar Styling */
.sidebar-content::-webkit-scrollbar {
    width: 6px;
}

.sidebar-content::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar-content::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 3px;
}

.sidebar-content::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        z-index: 50;
        transform: translateX(-100%);
    }

    .sidebar.active {
        transform: translateX(0);
    }
}
.starter-item-wrapper {
    position: relative;
    margin-bottom: 8px;
}

.starter-item-wrapper.active .starter-item {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
}

.starter-item {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
}

.starter-item-text {
    text-align: left;
}

.starter-item .conv-item-badges {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
}

/* .starter-item-wrapper .conv-item-actions {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    display: none;
    gap: 4px;

} */

.starter-item-wrapper:hover .conv-item-actions {
    display: flex;
    opacity: 1;
}


/* =========================================
   MY PROMPTS CENTER STYLES
   ========================================= */
.prompts-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.prompts-overlay.active {
    opacity: 1;
    visibility: visible;
}

.prompts-container {
    width: 95%;
    max-width: 1200px;
    max-height: 90vh;
    background: #f8fafa;
    border-radius: 20px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    overflow: hidden;
    transform: scale(0.95) translateY(20px);
    transition: transform 0.3s ease;
}

.prompts-overlay.active .prompts-container {
    transform: scale(1) translateY(0);
}

.prompts-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 28px;
    background: #ffffff;
    border-bottom: 1px solid #e5e7eb;
}

.prompts-header-left {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.prompts-title {
    font-size: 1.375rem;
    font-weight: 600;
    color: #111827;
}

.prompts-subtitle {
    font-size: 0.875rem;
    color: #6b7280;
}

.prompts-header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

.prompts-search {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: #f3f4f6;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    min-width: 280px;
}

.prompts-search svg {
    width: 18px;
    height: 18px;
    color: #9ca3af;
    flex-shrink: 0;
}

.prompts-search input {
    flex: 1;
    border: none;
    background: transparent;
    font-size: 0.875rem;
    color: #111827;
    outline: none;
}

.prompts-search input::placeholder {
    color: #9ca3af;
}

.prompts-close-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: #f3f4f6;
    border-radius: 10px;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s ease;
}

.prompts-close-btn:hover {
    background: #e5e7eb;
    color: #111827;
}

.prompts-body {
    padding: 24px 28px;
    overflow-y: auto;
    max-height: calc(90vh - 100px);
}

.prompts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 16px;
}

.prompt-card {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 14px;
    padding: 18px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.prompt-card:hover {
    border-color: #d1d5db;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
}

.prompt-card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 12px;
}

.prompt-tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 0.6875rem;
    font-weight: 500;
}

.prompt-tag.openai {
    background: #ecfdf5;
    color: #059669;
}

.prompt-tag.gpt4 {
    background: #f0fdf4;
    color: #16a34a;
}

.prompt-tag.claude {
    background: #fef3c7;
    color: #b45309;
}

.prompt-tag.custom {
    background: #eff6ff;
    color: #2563eb;
}

.prompt-tag.cohere {
    background: #f3e8ff;
    color: #7c3aed;
}

.prompt-card-title {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 4px;
    line-height: 1.4;
}

.prompt-card-author {
    font-size: 0.75rem;
    color: #9ca3af;
    margin-bottom: 10px;
}

.prompt-card-desc {
    font-size: 0.8125rem;
    color: #6b7280;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.prompt-card-actions {
    position: absolute;
    top: 12px;
    right: 12px;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.prompt-card:hover .prompt-card-actions {
    opacity: 1;
}

.prompt-action-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: #f3f4f6;
    border-radius: 8px;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.15s ease;
}

.prompt-action-btn:hover {
    background: #e5e7eb;
    color: #111827;
}

.prompts-empty {
    text-align: center;
    padding: 60px 20px;
}

.prompts-empty-icon {
    width: 64px;
    height: 64px;
    margin: 0 auto 16px;
    color: #d1d5db;
}

.prompts-empty-title {
    font-size: 1.125rem;
    font-weight: 500;
    color: #374151;
    margin-bottom: 8px;
}

.prompts-empty-desc {
    font-size: 0.875rem;
    color: #9ca3af;
    margin-bottom: 20px;
}

.btn-create-prompt {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-create-prompt:hover {
    box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
    transform: translateY(-1px);
}

/* =========================================
   FILES CENTER STYLES
   ========================================= */
.files-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.files-overlay.active {
    opacity: 1;
    visibility: visible;
}

.files-container {
    width: 95%;
    max-width: 1100px;
    max-height: 90vh;
    background: #ffffff;
    border-radius: 20px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    overflow: hidden;
    transform: scale(0.95) translateY(20px);
    transition: transform 0.3s ease;
}

.files-overlay.active .files-container {
    transform: scale(1) translateY(0);
}

.files-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 28px;
    border-bottom: 1px solid #e5e7eb;
}

.files-modal-title {
    font-size: 1.375rem;
    font-weight: 600;
    color: #111827;
}

.files-header-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

.btn-export {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: #ffffff;
    color: #374151;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-export:hover {
    background: #f9fafb;
    border-color: #9ca3af;
}

.btn-new-doc {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-new-doc:hover {
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
}

.files-close-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: #f3f4f6;
    border-radius: 10px;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s ease;
}

.files-close-btn:hover {
    background: #e5e7eb;
    color: #111827;
}

.files-tabs {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 12px 28px;
    border-bottom: 1px solid #e5e7eb;
    background: #f9fafb;
    overflow-x: auto;
}

.files-tab {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    background: transparent;
    border: none;
    border-radius: 8px;
    font-size: 0.8125rem;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.files-tab:hover {
    background: #e5e7eb;
    color: #111827;
}

.files-tab.active {
    background: #ffffff;
    color: #7c3aed;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.files-tab svg {
    width: 16px;
    height: 16px;
}

.files-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 28px;
    border-bottom: 1px solid #f3f4f6;
}

.files-filters {
    display: flex;
    align-items: center;
    gap: 10px;
}

.filter-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: #eff6ff;
    color: #1d4ed8;
    border: none;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
}

.filter-chip .remove {
    width: 14px;
    height: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(29, 78, 216, 0.2);
    border-radius: 50%;
}

.files-search {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 14px;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    min-width: 200px;
}

.files-search svg {
    width: 16px;
    height: 16px;
    color: #9ca3af;
}

.files-search input {
    flex: 1;
    border: none;
    background: transparent;
    font-size: 0.8125rem;
    outline: none;
}

.files-view-toggle {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px;
    background: #f3f4f6;
    border-radius: 8px;
}

.view-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    border-radius: 6px;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.15s ease;
}

.view-btn.active {
    background: #ffffff;
    color: #111827;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.files-body {
    padding: 0;
    max-height: calc(90vh - 240px);
    overflow-y: auto;
}

.files-table {
    width: 100%;
    border-collapse: collapse;
}

.files-table th {
    padding: 12px 16px;
    text-align: left;
    font-size: 0.75rem;
    font-weight: 500;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    background: #f9fafb;
    border-bottom: 1px solid #e5e7eb;
    position: sticky;
    top: 0;
}

.files-table th:first-child {
    padding-left: 28px;
}

.files-table td {
    padding: 14px 16px;
    border-bottom: 1px solid #f3f4f6;
    vertical-align: middle;
}

.files-table td:first-child {
    padding-left: 28px;
}

.files-table tr:hover {
    background: #f9fafb;
}

.file-name-cell {
    display: flex;
    align-items: center;
    gap: 12px;
}

.file-icon-wrapper {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
    flex-shrink: 0;
}

.file-icon-wrapper.report {
    background: #fef3c7;
    color: #d97706;
}

.file-icon-wrapper.pdf {
    background: #fee2e2;
    color: #dc2626;
}

.file-icon-wrapper.doc {
    background: #dbeafe;
    color: #2563eb;
}

.file-icon-wrapper.image {
    background: #f3e8ff;
    color: #7c3aed;
}

.file-icon-wrapper.data {
    background: #dcfce7;
    color: #16a34a;
}

.file-name-info h4 {
    font-size: 0.875rem;
    font-weight: 500;
    color: #111827;
    margin-bottom: 2px;
}

.file-name-info p {
    font-size: 0.75rem;
    color: #9ca3af;
}

.file-date {
    font-size: 0.8125rem;
    color: #6b7280;
}

.file-recipients {
    display: flex;
    align-items: center;
}

.recipient-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: 2px solid #ffffff;
    margin-left: -8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.625rem;
    font-weight: 600;
    color: #ffffff;
}

.recipient-avatar:first-child {
    margin-left: 0;
}

.recipient-avatar.more {
    background: #e5e7eb;
    color: #6b7280;
}

.file-status-badge {
    display: inline-flex;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.6875rem;
    font-weight: 500;
}

.file-status-badge.draft {
    background: #f3f4f6;
    color: #6b7280;
}

.file-status-badge.completed {
    background: #dcfce7;
    color: #16a34a;
}

.file-status-badge.sent {
    background: #dbeafe;
    color: #2563eb;
}

.file-status-badge.expired {
    background: #fee2e2;
    color: #dc2626;
}

.file-actions-cell {
    display: flex;
    align-items: center;
    gap: 8px;
}

.btn-view-file {
    padding: 6px 14px;
    background: #f3f4f6;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 500;
    color: #374151;
    cursor: pointer;
    transition: all 0.15s ease;
}

.btn-view-file:hover {
    background: #e5e7eb;
}

.btn-file-more {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    border-radius: 6px;
    color: #9ca3af;
    cursor: pointer;
    transition: all 0.15s ease;
}

.btn-file-more:hover {
    background: #f3f4f6;
    color: #6b7280;
}

.files-pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 28px;
    border-top: 1px solid #e5e7eb;
    background: #f9fafb;
}

.pagination-info {
    font-size: 0.8125rem;
    color: #6b7280;
}

.pagination-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.pagination-pages {
    display: flex;
    align-items: center;
    gap: 4px;
}

.page-btn {
    min-width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    border-radius: 6px;
    font-size: 0.8125rem;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.15s ease;
}

.page-btn:hover {
    background: #e5e7eb;
}

.page-btn.active {
    background: #7c3aed;
    color: #ffffff;
}

.page-btn.nav {
    padding: 0 12px;
    gap: 4px;
}

.page-btn.nav:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.files-empty-state {
    text-align: center;
    padding: 60px 20px;
}

.files-empty-icon {
    width: 64px;
    height: 64px;
    margin: 0 auto 16px;
    color: #d1d5db;
}

.files-empty-title {
    font-size: 1.125rem;
    font-weight: 500;
    color: #374151;
    margin-bottom: 8px;
}

.files-empty-desc {
    font-size: 0.875rem;
    color: #9ca3af;
}

/* =========================================
   FILE UPLOAD SYSTEM STYLES
   ========================================= */

/* Drag overlay for entire chat area */
.drag-overlay {
    position: fixed;
    inset: 0;
    background: rgba(236, 253, 245, 0.95);
    backdrop-filter: blur(8px);
    z-index: 9998;
    display: none;
    align-items: center;
    justify-content: center;
    pointer-events: none;
}

.drag-overlay.active {
    display: flex;
    animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.drag-overlay-content {
    text-align: center;
    padding: 48px;
    border: 3px dashed var(--forest-400);
    border-radius: 24px;
    background: white;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
    max-width: 500px;
    animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes scaleIn {
    from { transform: scale(0.9); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.drag-overlay-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 20px;
    background: linear-gradient(135deg, var(--forest-100), var(--teal-100));
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: bounce 1s ease-in-out infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.drag-overlay-icon svg {
    width: 40px;
    height: 40px;
    color: var(--forest-600);
}

.drag-overlay h3 {
    font-size: 1.25rem;
    font-weight: 500;
    color: var(--gray-900);
    margin-bottom: 8px;
}

.drag-overlay p {
    font-size: 0.875rem;
    color: var(--gray-500);
    font-weight: 300;
}

/* Upload zone in input area */
.upload-zone {
    position: relative;
    transition: all 0.3s ease;
}

.upload-zone.drag-over {
    border-color: var(--forest-400) !important;
    border-style: dashed !important;
    background: var(--forest-50);
}

.file-upload-preview {
    display: none;
    flex-wrap: wrap;
    gap: 8px;
    padding: 12px 0px;
    /* background: var(--surface-secondary); */
    /* border-radius: 12px 12px 0 0; */
    /* border: 1px solid var(--border-default); */
    border-bottom: none;
    margin-bottom: -2px;
    max-height: 120px;
    overflow-y: auto;
}

.file-upload-preview.has-files {
    display: flex;
}

/* Uploading state - full width with progress */
.file-upload-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    background: white;
    border-radius: 10px;
    border: 1px solid var(--border-subtle);
    transition: all 0.3s ease;
}

.file-upload-item.uploading {
    width: 100%;
    background: linear-gradient(90deg, white 0%, var(--forest-50) 50%, white 100%);
    background-size: 200% 100%;
    animation: uploadingBg 2s ease-in-out infinite;
}

.file-upload-item.error {
    width: 100%;
    background: var(--red-100);
    border-color: rgba(239, 68, 68, 0.3);
}



.file-upload-item:hover {
    border-color: var(--border-default);
    box-shadow: var(--shadow-sm);
}



@keyframes uploadingBg {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}


.file-upload-item.completed {
    background: var(--forest-50);
    border-color: var(--forest-200);
}

.file-type-icon {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.file-type-icon svg {
    width: 20px;
    height: 20px;
}

/* File type colors */
.file-type-icon.document {
    background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    color: #2563eb;
}

.file-type-icon.spreadsheet {
    background: linear-gradient(135deg, #dcfce7, #bbf7d0);
    color: #16a34a;
}

.file-type-icon.presentation {
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    color: #d97706;
}

.file-type-icon.image {
    background: linear-gradient(135deg, #fce7f3, #fbcfe8);
    color: #db2777;
}

.file-type-icon.audio {
    background: linear-gradient(135deg, #f3e8ff, #e9d5ff);
    color: #9333ea;
}

.file-type-icon.video {
    background: linear-gradient(135deg, #ffe4e6, #fecdd3);
    color: #e11d48;
}

.file-type-icon.code {
    background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
    color: #4f46e5;
}

.file-type-icon.data {
    background: linear-gradient(135deg, #ccfbf1, #99f6e4);
    color: #0d9488;
}

.file-type-icon.archive {
    background: linear-gradient(135deg, #f5f5f4, #e7e5e4);
    color: #57534e;
}

.file-type-icon.pdf {
    background: linear-gradient(135deg, #fee2e2, #fecaca);
    color: #dc2626;
}

/* File info */
.file-upload-info {
    flex: 1;
    min-width: 0;
}

/* COMPLETED STATE - Compact chip like the image */
.file-upload-item.completed {
    width: auto;
    padding: 6px 10px 6px 8px;
    gap: 8px;
    background: #f5f5f5;
    border: 1px solid #e5e5e5;
    border-radius: 8px;
}

.file-upload-item.completed .file-type-icon {
    width: 28px;
    height: 28px;
    border-radius: 6px;
}

.file-upload-item.completed .file-type-icon svg {
    width: 16px;
    height: 16px;
}

.file-upload-item.completed .file-upload-info {
    flex: none;
    max-width: 150px;
}

.file-upload-item.completed .file-upload-name {
    font-size: 0.75rem;
    font-weight: 450;
    color: var(--gray-700);
}

.file-upload-item.completed .file-upload-meta {
    display: none; /* Hide size/status text in compact mode */
}

.file-upload-item.completed .file-upload-actions {
    margin-left: 0;
}

.file-upload-item.completed .file-action-btn {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #d4d4d4;
    color: #737373;
}

.file-upload-item.completed .file-action-btn:hover {
    background: #a3a3a3;
    color: white;
}

.file-upload-item.completed .file-action-btn svg {
    width: 12px;
    height: 12px;
}

.file-upload-name {
    font-size: 0.8125rem;
    font-weight: 400;
    color: var(--gray-900);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 2px;
}

.file-upload-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.6875rem;
    color: var(--gray-500);
    font-weight: 300;
}

.file-upload-size {
    color: var(--gray-400);
}

/* Progress bar */
.file-upload-progress {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 8px;
}

.progress-bar-container {
    flex: 1;
    height: 6px;
    background: var(--gray-200);
    border-radius: 3px;
    overflow: hidden;
}

.progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--forest-400), var(--teal-400));
    border-radius: 3px;
    transition: width 0.3s ease;
    position: relative;
    overflow: hidden;
}

.progress-bar-fill::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent
    );
    animation: progressShine 1.5s ease-in-out infinite;
}

@keyframes progressShine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.progress-percentage {
    font-size: 0.6875rem;
    font-weight: 500;
    color: var(--forest-600);
    min-width: 36px;
    text-align: right;
}

/* Status indicators */
.file-upload-status {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.6875rem;
    font-weight: 500;
}

.file-upload-status.uploading {
    color: var(--forest-600);
}

.file-upload-status.error {
    color: #dc2626;
}

.file-upload-status.completed {
    color: var(--forest-600);
}

.status-icon {
    width: 16px;
    height: 16px;
}

.status-icon.spin {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Action buttons */
.file-upload-actions {
    display: flex;
    align-items: center;
    gap: 4px;
}

.file-action-btn {
    width: 28px;
    height: 28px;
    border: none;
    background: transparent;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--gray-400);
    transition: all 0.2s ease;
}

.file-action-btn:hover {
    background: var(--gray-100);
    color: var(--gray-600);
}

.file-action-btn.remove:hover {
    background: #fee2e2;
    color: #dc2626;
}

.file-action-btn.retry:hover {
    background: var(--amber-100);
    color: var(--amber-700);
}

.file-action-btn svg {
    width: 16px;
    height: 16px;
}

/* Compact upload area in input bar */
.input-upload-zone {
    position: relative;
}

/* Attachment button styles */
.attachment-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    border-radius: 10px;
    color: var(--gray-400);
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    position: relative;
}

.attachment-btn:hover {
    background: var(--surface-tertiary);
    color: var(--forest-600);
    transform: scale(1.05);
}

.attachment-btn.has-files {
    color: var(--forest-600);
    background: var(--forest-50);
}

.attachment-btn svg {
    width: 20px;
    height: 20px;
}

.attachment-badge {
    position: absolute;
    top: 2px;
    right: 2px;
    width: 16px;
    height: 16px;
    background: var(--forest-500);
    color: white;
    font-size: 0.625rem;
    font-weight: 600;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: badgePop 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes badgePop {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* Initial input upload zone styling */
.initial-upload-zone {
    margin-top: 16px;
    padding: 20px;
    border: 2px dashed var(--border-default);
    border-radius: 16px;
    background: var(--surface-secondary);
    transition: all 0.3s ease;
    cursor: pointer;
}

.initial-upload-zone:hover {
    border-color: var(--forest-300);
    background: var(--forest-50);
}

.initial-upload-zone.drag-over {
    border-color: var(--forest-400);
    background: var(--forest-100);
    transform: scale(1.01);
}

.upload-zone-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    text-align: center;
}

.upload-zone-icon {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, var(--forest-100), var(--teal-100));
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s ease;
}

.initial-upload-zone:hover .upload-zone-icon {
    transform: translateY(-2px);
}

.upload-zone-icon svg {
    width: 24px;
    height: 24px;
    color: var(--forest-600);
}

.upload-zone-text h4 {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--gray-800);
    margin-bottom: 4px;
}

.upload-zone-text h4 span {
    color: var(--forest-600);
}

.upload-zone-text p {
    font-size: 0.75rem;
    color: var(--gray-500);
    font-weight: 300;
}

/* Supported file types pill */
.upload-supported-types {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    justify-content: center;
    margin-top: 8px;
}

.file-type-pill {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background: white;
    border: 1px solid var(--border-subtle);
    border-radius: 20px;
    font-size: 0.6875rem;
    color: var(--gray-600);
    font-weight: 400;
}

.file-type-pill svg {
    width: 12px;
    height: 12px;
}

/* Toast notification for file errors */
.upload-toast {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--gray-900);
    color: white;
    padding: 12px 20px;
    border-radius: 10px;
    font-size: 0.8125rem;
    font-weight: 400;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    z-index: 10000;
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    display: flex;
    align-items: center;
    gap: 10px;
}

.upload-toast.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

.upload-toast.error {
    background: #dc2626;
}

.upload-toast svg {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
}

/* Scrollbar for file list */
.file-upload-preview::-webkit-scrollbar {
    width: 6px;
}

.file-upload-preview::-webkit-scrollbar-track {
    background: transparent;
}

.file-upload-preview::-webkit-scrollbar-thumb {
    background: var(--gray-300);
    border-radius: 3px;
}

.file-upload-preview::-webkit-scrollbar-thumb:hover {
    background: var(--gray-400);
}
  

/* ============================================
   PROMPT ENHANCER - Floating Pill Component
   ============================================ */

/* Base pill container */
.prompt-enhancer-pill {
    position: absolute;
    top: calc(100% + 8px);
    left: 16px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
    font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 13px;
    font-weight: 500;
    z-index: 100;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: left bottom;
    
    /* Entry animation */
    animation: pillSlideIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.prompt-enhancer-pill:hover {
    border-color: #c7d2fe;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15), 0 2px 4px rgba(0, 0, 0, 0.05);
    transform: translateY(-1px);
}

.prompt-enhancer-pill.hidden {
    animation: pillSlideOut 0.2s cubic-bezier(0.4, 0, 1, 1) forwards;
    pointer-events: none;
}

/* Sparkle icon */
.enhancer-icon {
    width: 16px;
    height: 16px;
    color: #6366f1;
    flex-shrink: 0;
}

/* Pill text */
.enhancer-text {
    color: #6366f1;
    white-space: nowrap;
    user-select: none;
}

/* Close button */
.enhancer-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    margin-left: 2px;
    border-radius: 50%;
    color: #94a3b8;
    transition: all 0.15s ease;
    flex-shrink: 0;
}

.enhancer-close:hover {
    background: #f1f5f9;
    color: #64748b;
}

.enhancer-close svg {
    width: 12px;
    height: 12px;
}

/* ============================================
   LOADING STATE - Skeleton Animation
   ============================================ */

.prompt-enhancer-pill.loading {
    pointer-events: none;
    padding: 6px 16px;
}

.enhancer-skeleton {
    display: flex;
    align-items: center;
    gap: 8px;
}

.skeleton-spinner {
    width: 14px;
    height: 14px;
    border: 2px solid #e2e8f0;
    border-top-color: #6366f1;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

.skeleton-text {
    color: #94a3b8;
    font-size: 12px;
}

.skeleton-dots {
    display: inline-flex;
    gap: 2px;
}

.skeleton-dots span {
    width: 3px;
    height: 3px;
    background: #94a3b8;
    border-radius: 50%;
    animation: dotPulse 1.2s ease-in-out infinite;
}

.skeleton-dots span:nth-child(2) {
    animation-delay: 0.2s;
}

.skeleton-dots span:nth-child(3) {
    animation-delay: 0.4s;
}

/* ============================================
   ACTION BAR - Accept/Revert State
   ============================================ */

.prompt-enhancer-actions {
    position: absolute;
    top: calc(100% + 8px);
    left: 16px;
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
    font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 13px;
    z-index: 100;
    
    animation: actionsSlideIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.prompt-enhancer-actions.hidden {
    animation: actionsSlideOut 0.2s cubic-bezier(0.4, 0, 1, 1) forwards;
    pointer-events: none;
}

/* Accept button */
.enhancer-accept-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
}

.enhancer-accept-btn:hover {
    background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(20, 184, 166, 0.3);
}

.enhancer-accept-btn svg {
    width: 14px;
    height: 14px;
}

/* View Original button */
.enhancer-view-btn {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background: transparent;
    color: #64748b;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
}

.enhancer-view-btn:hover {
    background: #f1f5f9;
    color: #475569;
}

.enhancer-view-btn svg {
    width: 14px;
    height: 14px;
}

/* Revert button */
.enhancer-revert-btn {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background: transparent;
    color: #64748b;
    border: none;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
}

.enhancer-revert-btn:hover {
    background: #fef2f2;
    color: #dc2626;
}

.enhancer-revert-btn svg {
    width: 14px;
    height: 14px;
}

/* Divider */
.enhancer-divider {
    width: 1px;
    height: 20px;
    background: #e2e8f0;
    margin: 0 4px;
}

/* ============================================
   TEXTAREA ENHANCEMENT INDICATOR
   ============================================ */

.textarea-enhanced {
    animation: textEnhanced 0.4s ease;
}

.textarea-enhancing {
    opacity: 0.6;
    pointer-events: none;
}

/* ============================================
   ORIGINAL PROMPT PREVIEW TOOLTIP
   ============================================ */

.original-prompt-preview {
    position: absolute;
    top: calc(100% + 48px);
    left: 16px;
    max-width: 400px;
    padding: 12px 16px;
    background: #1e293b;
    color: #e2e8f0;
    border-radius: 8px;
    font-size: 12px;
    line-height: 1.5;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    z-index: 101;
    
    animation: tooltipFadeIn 0.2s ease forwards;
}

.original-prompt-preview::after {
    content: '';
    position: absolute;
    top: -6px;
    left: 24px;
    width: 12px;
    height: 12px;
    background: #1e293b;
    transform: rotate(45deg);
}

.original-prompt-preview-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 8px;
    color: #94a3b8;
    font-size: 11px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.original-prompt-preview-text {
    color: #f1f5f9;
    word-break: break-word;
}

.original-prompt-preview.hidden {
    animation: tooltipFadeOut 0.15s ease forwards;
    pointer-events: none;
}

/* ============================================
   KEYFRAME ANIMATIONS
   ============================================ */

@keyframes pillSlideIn {
    0% {
        opacity: 0;
        transform: translateY(8px) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes pillSlideOut {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(4px) scale(0.95);
    }
}

@keyframes actionsSlideIn {
    0% {
        opacity: 0;
        transform: translateY(8px) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes actionsSlideOut {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(4px) scale(0.95);
    }
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes dotPulse {
    0%, 80%, 100% {
        opacity: 0.3;
        transform: scale(0.8);
    }
    40% {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes textEnhanced {
    0% {
        background-color: rgba(99, 102, 241, 0.1);
    }
    100% {
        background-color: transparent;
    }
}

@keyframes tooltipFadeIn {
    0% {
        opacity: 0;
        transform: translateY(4px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes tooltipFadeOut {
    0% {
        opacity: 1;
        transform: translateY(0);
    }
    100% {
        opacity: 0;
        transform: translateY(4px);
    }
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
   ============================================ */

@media (max-width: 640px) {
    .prompt-enhancer-pill,
    .prompt-enhancer-actions {
        left: 12px;
    }
    
    .original-prompt-preview {
        max-width: calc(100vw - 48px);
        left: 12px;
    }
}

/* ============================================
   CONVERSATIONS - LIMITED VIEW WITH VIEW ALL
   ============================================ */

/* Hide scrollbar on sidebar-content by default */
.sidebar-content {
    flex: 1;
    overflow: hidden; /* Changed from overflow-y: auto */
    padding: 16px 12px;
    display: flex;
    flex-direction: column;
}

/* Conversations container - limited mode (default) */
#conversationsListContainer.conversations-limited {
    max-height: none;
    overflow: hidden;
}

/* Conversations container - expanded mode */
#conversationsListContainer.conversations-expanded {
    flex: 1;
    overflow-y: auto;
    max-height: calc(100vh - 340px);
}

/* Scrollbar styling only for expanded conversations */
#conversationsListContainer.conversations-expanded::-webkit-scrollbar {
    width: 4px;
}

#conversationsListContainer.conversations-expanded::-webkit-scrollbar-track {
    background: transparent;
}

#conversationsListContainer.conversations-expanded::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 2px;
}

#conversationsListContainer.conversations-expanded::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

/* View All / Show Less button in header */
.starter-header {
    font-size: 11px;
    font-weight: 600;
    color: #9ca3af;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 8px 12px 4px 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.starter-header-action {
    font-size: 11px;
    font-weight: 500;
    color: #10b981;
    cursor: pointer;
    text-transform: none;
    letter-spacing: normal;
    transition: color 0.15s ease;
}

.starter-header-action:hover {
    color: #059669;
}

/* Starter section should take remaining space when expanded */
.starter-section {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex: 1;
    min-height: 0;
    overflow: hidden;
}

.starter-section.expanded {
    flex: 1;
}

.starter-section.expanded #conversationsListContainer {
    flex: 1;
}

/* ============================================
   ADD THIS CSS TO THE END OF aistyle.css
   ============================================ */

/* Add Prompt Button in Header */
.btn-add-prompt {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    font-size: 0.875rem;
    font-weight: 500;
    color: #ffffff;
    background: #10b981;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.btn-add-prompt:hover {
    background: #059669;
    transform: translateY(-1px);
}

.btn-add-prompt svg {
    flex-shrink: 0;
}

/* Prompt Card Footer with Use Button */
.prompt-card-footer {
    display: flex;
    justify-content: flex-end;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #f3f4f6;
}

.prompt-use-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    font-size: 0.8125rem;
    font-weight: 500;
    color: #10b981;
    background: #ecfdf5;
    border: 1px solid #d1fae5;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.prompt-use-btn:hover {
    background: #d1fae5;
    color: #059669;
}

.prompt-use-btn svg {
    flex-shrink: 0;
}

/* Prompt Context Menu */
.prompt-context-menu {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    padding: 6px;
    min-width: 160px;
    animation: menuFadeIn 0.15s ease;
}

@keyframes menuFadeIn {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.prompt-menu-item {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 10px 12px;
    font-size: 0.875rem;
    color: #374151;
    background: none;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: left;
}

.prompt-menu-item:hover {
    background: #f3f4f6;
}

.prompt-menu-item.danger {
    color: #ef4444;
}

.prompt-menu-item.danger:hover {
    background: #fef2f2;
}

.prompt-menu-item svg {
    flex-shrink: 0;
}

.prompt-menu-divider {
    height: 1px;
    background: #e5e7eb;
    margin: 6px 0;
}

/* Prompts Loading State */
.prompts-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: #6b7280;
    gap: 16px;
    grid-column: 1 / -1;
}

.prompts-loading-spinner {
    width: 32px;
    height: 32px;
    border: 3px solid #e5e7eb;
    border-top-color: #10b981;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Save Prompt Modal */
.save-prompt-modal {
    max-width: 560px;
    width: 95%;
}

.save-prompt-modal .modal-body {
    padding: 24px;
}

.save-prompt-modal .form-group {
    margin-bottom: 20px;
}

.save-prompt-modal .form-group:last-of-type {
    margin-bottom: 0;
}

.save-prompt-modal .form-row {
    display: flex;
    gap: 16px;
}

.modal-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
    margin-bottom: 8px;
}

.modal-input {
    width: 100%;
    padding: 12px 14px;
    font-size: 0.9375rem;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    background: #ffffff;
    color: #111827;
    transition: all 0.2s ease;
    font-family: inherit;
}

.modal-input:focus {
    outline: none;
    border-color: #10b981;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.modal-input::placeholder {
    color: #9ca3af;
}

.modal-textarea {
    width: 100%;
    padding: 12px 14px;
    font-size: 0.9375rem;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    background: #ffffff;
    color: #111827;
    transition: all 0.2s ease;
    font-family: inherit;
    resize: vertical;
    min-height: 120px;
    line-height: 1.5;
}

.modal-textarea:focus {
    outline: none;
    border-color: #10b981;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.modal-textarea::placeholder {
    color: #9ca3af;
}

.modal-select {
    width: 100%;
    padding: 12px 14px;
    font-size: 0.9375rem;
    border: 1px solid #e5e7eb;
    border-radius: 10px;
    background: #ffffff;
    color: #111827;
    transition: all 0.2s ease;
    font-family: inherit;
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 18px;
    padding-right: 40px;
}

.modal-select:focus {
    outline: none;
    border-color: #10b981;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* GREEN Primary Button for Save Prompt Modal */
.modal-btn-primary-green {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    font-size: 0.9375rem;
    font-weight: 500;
    color: #ffffff;
    background: linear-gradient(135deg, #10b981, #059669);
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.modal-btn-primary-green:hover {
    background: linear-gradient(135deg, #059669, #047857);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.modal-btn-primary-green:disabled {
    background: #9ca3af;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.modal-btn-primary-green svg {
    flex-shrink: 0;
}

/* Prompt Card Actions - Show on Hover */
.prompt-card {
    position: relative;
}

.prompt-card-actions {
    position: absolute;
    top: 12px;
    right: 12px;
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.prompt-card:hover .prompt-card-actions {
    opacity: 1;
}

.prompt-action-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: #f3f4f6;
    border-radius: 8px;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s ease;
}

.prompt-action-btn:hover {
    background: #e5e7eb;
    color: #111827;
}

/* Create Prompt Button in Empty State */
.btn-create-prompt {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    font-size: 0.9375rem;
    font-weight: 500;
    color: #ffffff;
    background: linear-gradient(135deg, #10b981, #059669);
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-top: 16px;
}

.btn-create-prompt:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.btn-create-prompt svg {
    flex-shrink: 0;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .save-prompt-modal {
        max-width: 100%;
        max-height: 90vh;
        margin: 20px;
        border-radius: 16px;
    }
    
    .save-prompt-modal .form-row {
        flex-direction: column;
        gap: 20px;
    }
    
    .prompts-header {
        flex-direction: column;
        gap: 16px;
        align-items: stretch;
    }
    
    .prompts-header-actions {
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .prompts-search {
        min-width: 100%;
        order: 3;
    }
    
    .btn-add-prompt {
        flex: 1;
    }
    
    .prompt-context-menu {
        left: 50% !important;
        transform: translateX(-50%);
    }
    
    .prompt-card-actions {
        opacity: 1;
    }
}

/* ============================================
   SOURCE FILES PANEL
   ============================================ */

.source-files-panel {
    margin-top: 16px;
    border: 1px solid var(--gray-200);
    border-radius: 12px;
    background: var(--gray-50);
    overflow: hidden;
    transition: all 0.2s ease;
}

.source-files-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    cursor: pointer;
    transition: background 0.15s ease;
}

.source-files-header:hover {
    background: var(--gray-100);
}

.source-files-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.source-files-icon svg {
    color: white;
}

.source-files-title {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 500;
    color: var(--gray-800);
}

.source-files-count {
    background: var(--forest-100);
    color: var(--forest-700);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
}

.source-files-chevron {
    width: 20px;
    height: 20px;
    color: var(--gray-400);
    transition: transform 0.2s ease;
}

.source-files-header.expanded .source-files-chevron {
    transform: rotate(180deg);
}

.source-files-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.source-files-body.expanded {
    max-height: 500px;
}

.source-files-list {
    padding: 0 16px 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Individual File Item */
.source-file-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: 10px;
    transition: all 0.15s ease;
}

.source-file-item:hover {
    border-color: var(--forest-300);
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.1);
}

.source-file-icon {
    width: 42px;
    height: 42px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.source-file-icon.pdf {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
}

.source-file-icon.pdf svg {
    color: #dc2626;
}

.source-file-icon.doc {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
}

.source-file-icon.doc svg {
    color: #2563eb;
}

.source-file-icon.default {
    background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
}

.source-file-icon.default svg {
    color: #6b7280;
}

.source-file-info {
    flex: 1;
    min-width: 0;
}

.source-file-name {
    font-weight: 500;
    color: var(--gray-800);
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.source-file-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 2px;
    font-size: 12px;
    color: var(--gray-500);
}

.source-file-quote {
    margin-top: 8px;
    padding: 8px 12px;
    background: var(--gray-50);
    border-left: 3px solid var(--forest-400);
    border-radius: 0 6px 6px 0;
    font-size: 12px;
    color: var(--gray-600);
    font-style: italic;
    line-height: 1.5;
    max-height: 60px;
    overflow: hidden;
}

.source-file-actions {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
}

.source-file-btn {
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    gap: 6px;
    border: none;
}

.source-file-btn.view {
    background: var(--forest-500);
    color: white;
}

.source-file-btn.view:hover {
    background: var(--forest-600);
}

.source-file-btn.download {
    background: var(--gray-100);
    color: var(--gray-700);
    border: 1px solid var(--gray-200);
}

.source-file-btn.download:hover {
    background: var(--gray-200);
}

/* ============================================
   PDF VIEWER MODAL
   ============================================ */

.pdf-viewer-modal {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
}

.pdf-modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
}

.pdf-modal-container {
    position: relative;
    width: 90vw;
    max-width: 1200px;
    height: 90vh;
    background: white;
    border-radius: 16px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    animation: modalSlideIn 0.2s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.pdf-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid var(--gray-200);
    background: var(--gray-50);
}

.pdf-modal-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    color: var(--gray-800);
}

.pdf-modal-title svg {
    color: #dc2626;
}

.pdf-modal-actions {
    display: flex;
    align-items: center;
    gap: 8px;
}

.pdf-action-btn {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--gray-600);
    background: white;
    border: 1px solid var(--gray-200);
    transition: all 0.15s ease;
    text-decoration: none;
}

.pdf-action-btn:hover {
    background: var(--gray-100);
    color: var(--gray-800);
}

.pdf-close-btn {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--gray-500);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.15s ease;
}

.pdf-close-btn:hover {
    background: var(--gray-200);
    color: var(--gray-700);
}

.pdf-modal-body {
    flex: 1;
    padding: 0;
    overflow: hidden;
}

.pdf-viewer-frame {
    width: 100%;
    height: 100%;
    border: none;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .pdf-modal-container {
        width: 100vw;
        height: 100vh;
        border-radius: 0;
    }
    
    .source-file-actions {
        flex-direction: column;
    }
    
    .source-file-btn {
        width: 100%;
        justify-content: center;
    }
}